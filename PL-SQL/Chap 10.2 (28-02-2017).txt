SQL> set lines 300
SQL> set pages 25
SQL> exit
SQL> set lines 300
SQL> set pages 20
SQL> set serveroutput on
SQL> CREATE OR REPLACE PROCEDURE raise_salary
  2    (p_id      IN employees.employee_id%TYPE,
  3     p_percent IN NUMBER)
  4  IS
  5  BEGIN
  6  
  7    UPDATE employees
  8    SET    salary = salary * (1 + p_percent/100)
  9    WHERE  employee_id = p_id;
 10  END raise_salary;
 11  /

Procedure created.

SQL> 
SQL> execute raise_salary(100,10);

PL/SQL procedure successfully completed.

SQL> select * from employees where employee_id=100;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        100 Steven               King                      SKING                                              515.123.4567         17-JUN-03 AD_PRES       4058.48                                      90                                                                                                  

SQL> execute raise_salary(100,10);

PL/SQL procedure successfully completed.

SQL> select * from employees where employee_id=100;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        100 Steven               King                      SKING                                              515.123.4567         17-JUN-03 AD_PRES       4464.33                                      90                                                                                                  

SQL> begin
  2  raise_salary(200,5);
  3  end;
  4  /

PL/SQL procedure successfully completed.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2  e_id number:=&emp_id;
  3  per number:=&p;
  4  begin
  5  raise_salary(e_id,per);
  6* end;
SQL> /
Enter value for emp_id: 50
old   2: e_id number:=&emp_id;
new   2: e_id number:=50;
Enter value for p: 5
old   3: per number:=&p;
new   3: per number:=5;

PL/SQL procedure successfully completed.

SQL> /
Enter value for emp_id: 100
old   2: e_id number:=&emp_id;
new   2: e_id number:=100;
Enter value for p: 10
old   3: per number:=&p;
new   3: per number:=10;

PL/SQL procedure successfully completed.

SQL> CREATE OR REPLACE PROCEDURE query_emp
  2   (p_id     IN  employees.employee_id%TYPE,
  3    p_name   OUT employees.last_name%TYPE,
  4    p_salary OUT employees.salary%TYPE) IS
  5  BEGIN
  6    SELECT  last_name, salary INTO p_name, p_salary
  7    FROM    employees
  8    WHERE   employee_id = p_id;
  9  END query_emp;
 10  /

Procedure created.

SQL> SET SERVEROUTPUT ON
SQL> DECLARE
  2    v_emp_name employees.last_name%TYPE;
  3    v_emp_sal  employees.salary%TYPE;
  4  BEGIN
  5    query_emp(171, v_emp_name, v_emp_sal);
  6    DBMS_OUTPUT.PUT_LINE(v_emp_name||' earns '|| to_char(v_emp_sal, '$999,999.00'));
  7  END;
  8  /
DECLARE
*
ERROR at line 1:
ORA-01403: no data found 
ORA-06512: at "HR.QUERY_EMP", line 6 
ORA-06512: at line 5 


SQL> ed
Wrote file afiedt.buf

  1  DECLARE
  2    v_emp_name employees.last_name%TYPE;
  3    v_emp_sal  employees.salary%TYPE;
  4  BEGIN
  5    query_emp(100, v_emp_name, v_emp_sal);
  6    DBMS_OUTPUT.PUT_LINE(v_emp_name||' earns '|| to_char(v_emp_sal, '$999,999.00'));
  7* END;
SQL> /
King earns    $4,910.76                                                                                                                                                                                                                                                                                     

PL/SQL procedure successfully completed.

SQL> SET SERVEROUTPUT ON
SQL> 
SQL> CREATE OR REPLACE PROCEDURE format_phone
  2    (p_phone_no IN OUT VARCHAR2) IS
  3  
  4  BEGIN
  5    p_phone_no := '('  || SUBSTR(p_phone_no,1,3) ||
  6                  ') ' || SUBSTR(p_phone_no,4,3) ||
  7                  '-'  || SUBSTR(p_phone_no,7);
  8  END format_phone;
  9  /

Procedure created.

SQL> VARIABLE  b_phone_no VARCHAR2(15)
SQL> EXECUTE  :b_phone_no := '8006330575'

PL/SQL procedure successfully completed.

SQL> PRINT   b_phone_no

B_PHONE_NO                                                                                                                                                                                                                                                                                                  
--------------------------------                                                                                                                                                                                                                                                                            
8006330575                                                                                                                                                                                                                                                                                                  

SQL> EXECUTE  format_phone (:b_phone_no)

PL/SQL procedure successfully completed.

SQL> PRINT b_phone_no

B_PHONE_NO                                                                                                                                                                                                                                                                                                  
--------------------------------                                                                                                                                                                                                                                                                            
(800) 633-0575                                                                                                                                                                                                                                                                                              

SQL> declare
  2  p_phone varchar2(25):='3455654665';
  3  begin
  4  format_phone(p_phone);
  5  dbms_output.put_line('formatted no '||p_phone);
  6  end;
  7  /
formatted no (345) 565-4665                                                                                                                                                                                                                                                                                 

PL/SQL procedure successfully completed.

SQL> exit
SQL> set lines 300
SQL> set pages 200
SQL> CREATE OR REPLACE PROCEDURE add_dept(
  2    p_name IN departments.department_name%TYPE,
  3    p_loc  IN departments.location_id%TYPE) IS
  4  
  5  BEGIN
  6    INSERT INTO departments(department_id, department_name, location_id)
  7    VALUES (departments_seq.NEXTVAL, p_name, p_loc);
  8  END add_dept;
  9  /

Procedure created.

SQL> EXECUTE add_dept ('TRAINING', 2500)

PL/SQL procedure successfully completed.

SQL> 
SQL> SELECT *
  2  FROM departments
  3  WHERE department_name = 'TRAINING';

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          600 TRAINING                                         2500                                                                                                                                                                                                                                         
          410 TRAINING                                         2500                                                                                                                                                                                                                                         

SQL> EXECUTE add_dept (p_loc=>2400, p_name=>'EDUCATION')

PL/SQL procedure successfully completed.

SQL> 
SQL> SELECT *
  2  FROM departments
  3  WHERE department_name = 'EDUCATION';

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          610 EDUCATION                                        2400                                                                                                                                                                                                                                         
          420 EDUCATION                                        2400                                                                                                                                                                                                                                         

SQL> EXECUTE add_dept (p_name=>'reserch',p_loc=>2500);

PL/SQL procedure successfully completed.

SQL> SELECT *
  2  FROM departments
  3  WHERE department_name = 'reserch';

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          620 reserch                                          2500                                                                                                                                                                                                                                         

SQL> CREATE OR REPLACE PROCEDURE add_dept(
  2    p_name departments.department_name%TYPE:='Unknown',
  3    p_loc  departments.location_id%TYPE DEFAULT 1700) IS
  4  
  5  BEGIN
  6    INSERT INTO departments (department_id, department_name, location_id)
  7    VALUES (departments_seq.NEXTVAL, p_name, p_loc);
  8  END add_dept;
  9  /

Procedure created.

SQL> EXECUTE add_dept;

PL/SQL procedure successfully completed.

SQL> select * from departments where department_name='unknown';

no rows selected

SQL> select * from departments where department_name='Unknown';

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          630 Unknown                                          1700                                                                                                                                                                                                                                         
          430 Unknown                                          1700                                                                                                                                                                                                                                         
          450 Unknown                                          1200                                                                                                                                                                                                                                         

SQL> EXECUTE add_dept ('ADVERTISING', p_loc => 1200);

PL/SQL procedure successfully completed.

SQL> select * from departments where department_name='advertising';

no rows selected

SQL> select * from departments where department_name='ADVERTISING';

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          640 ADVERTISING                                      1200                                                                                                                                                                                                                                         
          440 ADVERTISING                                      1200                                                                                                                                                                                                                                         

SQL> EXECUTE add_dept (p_loc => 1200);

PL/SQL procedure successfully completed.

SQL> EXECUTE add_dept (p_name => 'hr');

PL/SQL procedure successfully completed.

SQL> EXECUTE add_dept(p_name=>'new dept', 'new location');
BEGIN add_dept(p_name=>'new dept', 'new location'); END;

                                   *
ERROR at line 1:
ORA-06550: line 1, column 36: 
PLS-00312: a positional parameter association may not follow a named association 
ORA-06550: line 1, column 7: 
PL/SQL: Statement ignored 


SQL> CREATE OR REPLACE PROCEDURE process_employees
  2  IS
  3     CURSOR cur_emp_cursor IS
  4        SELECT employee_id
  5        FROM   employees;
  6  BEGIN
  7     FOR emp_rec IN cur_emp_cursor
  8     LOOP
  9       raise_salary(emp_rec.employee_id, 10);
 10     END LOOP;
 11     COMMIT;
 12  END process_employees;
 13  /

Procedure created.

SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE PROCEDURE process_employees
  2  IS
  3     CURSOR cur_emp_cursor IS
  4        SELECT employee_id
  5        FROM   emp;
  6  BEGIN
  7     FOR emp_rec IN cur_emp_cursor
  8     LOOP
  9       raise_salary(emp_rec.employee_id, 10);
 10     END LOOP;
 11     COMMIT;
 12* END process_employees;
SQL> /

Warning: Procedure created with compilation errors.

SQL> drop table emp;
drop table emp
           *
ERROR at line 1:
ORA-00942: table or view does not exist 


SQL> create table emp as select * from employees;

Table created.

SQL> update emp set salary=5000;

110 rows updated.

SQL> CREATE OR REPLACE PROCEDURE process_employees
  2  IS
  3     CURSOR cur_emp_cursor IS
  4        SELECT employee_id
  5        FROM   emp;
  6  BEGIN
  7     FOR emp_rec IN cur_emp_cursor
  8     LOOP
  9       raise_salary(emp_rec.employee_id, 10);
 10     END LOOP;
 11     COMMIT;
 12  END process_employees;
 13  /

Procedure created.

SQL> execute process_employees;
BEGIN process_employees; END;

*
ERROR at line 1:
ORA-20202: Employee cannot earn more than $15,000. 
ORA-06512: at "HR.RESTRICT_SALARY", line 4 
ORA-04088: error during execution of trigger 'HR.RESTRICT_SALARY' 
ORA-06512: at "HR.RAISE_SALARY", line 7 
ORA-06512: at "HR.PROCESS_EMPLOYEES", line 9 
ORA-06512: at line 1 


SQL> drop trigger restrict_salary;

Trigger dropped.

SQL> execute process_employees;

PL/SQL procedure successfully completed.

SQL> select salary from emp;

    SALARY                                                                                                                                                                                                                                                                                                  
----------                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  

110 rows selected.

SQL> execute process_employees;

PL/SQL procedure successfully completed.

SQL> select salary from emp;

    SALARY                                                                                                                                                                                                                                                                                                  
----------                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  
      5000                                                                                                                                                                                                                                                                                                  

110 rows selected.

SQL> CREATE OR REPLACE PROCEDURE raise_salary
  2    (p_id      IN employees.employee_id%TYPE,
  3     p_percent IN NUMBER)
  4  IS
  5  BEGIN
  6  
  7    UPDATE employees
  8    SET    salary = salary * (1 + p_percent/100)
  9    WHERE  employee_id = p_id;
 10  END raise_salary;
 11  /

Procedure created.

SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE PROCEDURE raise_salary
  2    (p_id      IN employees.employee_id%TYPE,
  3     p_percent IN NUMBER)
  4  IS
  5  BEGIN
  6    UPDATE emp
  7    SET    salary = salary * (1 + p_percent/100)
  8    WHERE  employee_id = p_id;
  9* END raise_salary;
 10  /

Procedure created.

SQL> execute process_employees;

PL/SQL procedure successfully completed.

SQL> select salary from emp;

    SALARY                                                                                                                                                                                                                                                                                                  
----------                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  
      5500                                                                                                                                                                                                                                                                                                  

110 rows selected.

SQL> CREATE PROCEDURE add_department(
  2      p_name VARCHAR2, p_mgr NUMBER, p_loc NUMBER) IS
  3  
  4  BEGIN
  5    INSERT INTO departments (department_id,
  6      department_name, manager_id, location_id)
  7    VALUES (DEPARTMENTS_SEQ.NEXTVAL, p_name, p_mgr, p_loc);
  8    DBMS_OUTPUT.PUT_LINE('Added Dept: '|| p_name);
  9  
 10  EXCEPTION
 11   WHEN OTHERS THEN
 12    DBMS_OUTPUT.PUT_LINE('Err: adding dept: '|| p_name);
 13  END;
 14  /
CREATE PROCEDURE add_department(
                 *
ERROR at line 1:
ORA-00955: name is already used by an existing object 


SQL> ed
Wrote file afiedt.buf

  1  CREATE or replace PROCEDURE add_department(
  2      p_name VARCHAR2, p_mgr NUMBER, p_loc NUMBER) IS
  3  BEGIN
  4    INSERT INTO departments (department_id,
  5      department_name, manager_id, location_id)
  6    VALUES (DEPARTMENTS_SEQ.NEXTVAL, p_name, p_mgr, p_loc);
  7    DBMS_OUTPUT.PUT_LINE('Added Dept: '|| p_name);
  8  EXCEPTION
  9   WHEN OTHERS THEN
 10    DBMS_OUTPUT.PUT_LINE('Err: adding dept: '|| p_name);
 11* END;
 12  /

Procedure created.

SQL> CREATE PROCEDURE create_departments IS
  2  BEGIN
  3    add_department('Media', 100, 1800);
  4    add_department('Editing', 99, 1800);
  5    add_department('Advertising', 101, 1800);
  6  END;
  7  /
CREATE PROCEDURE create_departments IS
                 *
ERROR at line 1:
ORA-00955: name is already used by an existing object 


SQL> ed
Wrote file afiedt.buf

  1  CREATE or replace PROCEDURE create_departments IS
  2  BEGIN
  3    add_department('Media', 100, 1800);
  4    add_department('Editing', 99, 1800);
  5    add_department('Advertising', 101, 1800);
  6* END;
SQL> /

Procedure created.

SQL> execute create_departments;

PL/SQL procedure successfully completed.

SQL> select * from departments where location_id=1800;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          670 Media                                 100        1800                                                                                                                                                                                                                                         
          690 Advertising                           101        1800                                                                                                                                                                                                                                         
          480 Advertising                           101        1800                                                                                                                                                                                                                                         
          530 Media                                 100        1800                                                                                                                                                                                                                                         
           20 Marketing                             201        1800                                                                                                                                                                                                                                         

SQL> set serveroutput on;
SQL> execute create_departments;
Added Dept: Media                                                                                                                                                                                                                                                                                           
