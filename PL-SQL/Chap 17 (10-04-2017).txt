SQL> set lines 300
SQL> set pages 20
SQL> CREATE OR REPLACE TRIGGER secure_emp
  2  BEFORE INSERT ON employees
  3  BEGIN
  4   IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR
  5       (TO_CHAR(SYSDATE,'HH24:MI') NOT BETWEEN '08:00' AND '18:00') THEN
  6    RAISE_APPLICATION_ERROR(-20500,
  7      'You may insert into EMPLOYEES table only during normal business hours.');
  8    END IF;
  9  END;
 10  /

Trigger created.

SQL> exit
SQL> set lines 300
SQL> set pages 20
SQL> CREATE OR REPLACE TRIGGER secure_emp
  2  BEFORE INSERT ON employees
  3  BEGIN
  4   IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR
  5       (TO_CHAR(SYSDATE,'HH24:MI') NOT BETWEEN '08:00' AND '18:00') THEN
  6    RAISE_APPLICATION_ERROR(-20500,
  7      'You may insert into EMPLOYEES table only during normal business hours.');
  8    END IF;
  9  END;
 10  /

Trigger created.

SQL> INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
  2  VALUES (300, 'Smith', 'Rob', 'RSMITH', SYSDATE,'IT_PROG', 4500, 60);
INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
*
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMAIL_UK) violated 


SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
  2* VALUES (300, 'Smith', 'Rob', 'RSMITH12', SYSDATE,'IT_PROG', 4500, 60)
SQL> /
INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
*
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMP_ID_PK) violated 


SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
  2* VALUES (1300, 'Smith', 'Rob', 'RSMITH12', SYSDATE,'IT_PROG', 4500, 60)
SQL> /

1 row created.

SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
  2* VALUES (1301, 'Smith', 'Rob', 'RSMITH123', SYSDATE,'IT_PROG', 4500, 60)
SQL> /
INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
            *
ERROR at line 1:
ORA-20500: You may insert into EMPLOYEES table only during normal business hours. 
ORA-06512: at "HR.SECURE_EMP", line 4 
ORA-04088: error during execution of trigger 'HR.SECURE_EMP' 


SQL> CREATE OR REPLACE TRIGGER secure_emp
  2  BEFORE INSERT OR UPDATE OR DELETE ON employees
  3  BEGIN
  4   IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR
  5      (TO_CHAR(SYSDATE,'HH24') NOT BETWEEN '08' AND '18') THEN
  6     IF DELETING THEN
  7       RAISE_APPLICATION_ERROR(-20502,
  8         'You may delete from EMPLOYEES table only during normal business hours.');
  9     ELSIF INSERTING THEN
 10       RAISE_APPLICATION_ERROR(-20500,
 11         'You may insert into EMPLOYEES table only during normal business hours.');
 12     ELSIF UPDATING('SALARY') THEN
 13       RAISE_APPLICATION_ERROR(-20503,
 14         'You may update SALARY only during normal business hours.');
 15     ELSE
 16       RAISE_APPLICATION_ERROR(-20504,
 17         'You may update EMPLOYEES table only during normal business hours.');
 18     END IF;
 19   END IF;
 20  END;
 21  /

Trigger created.

SQL> INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
  2  VALUES (1301, 'Smith', 'Rob', 'RSMITH123', SYSDATE,'IT_PROG', 4500, 60);
INSERT INTO employees (employee_id, last_name, first_name, email, hire_date, job_id, salary, department_id)
            *
ERROR at line 1:
ORA-20500: You may insert into EMPLOYEES table only during normal business hours. 
ORA-06512: at "HR.SECURE_EMP", line 8 
ORA-04088: error during execution of trigger 'HR.SECURE_EMP' 


SQL> update employees set salary=5000 where employee_id=100;
update employees set salary=5000 where employee_id=100
       *
ERROR at line 1:
ORA-20503: You may update SALARY only during normal business hours. 
ORA-06512: at "HR.SECURE_EMP", line 11 
ORA-04088: error during execution of trigger 'HR.SECURE_EMP' 


SQL> update employees set last_name='jay' where employee_id=100;
update employees set last_name='jay' where employee_id=100
       *
ERROR at line 1:
ORA-20504: You may update EMPLOYEES table only during normal business hours. 
ORA-06512: at "HR.SECURE_EMP", line 14 
ORA-04088: error during execution of trigger 'HR.SECURE_EMP' 


SQL> delete from employees where employee_id=100;
delete from employees where employee_id=100
            *
ERROR at line 1:
ORA-20502: You may delete from EMPLOYEES table only during normal business hours. 
ORA-06512: at "HR.SECURE_EMP", line 5 
ORA-04088: error during execution of trigger 'HR.SECURE_EMP' 


SQL> select last_name,job_id from employees where last_name='Russell';

LAST_NAME                 JOB_ID                                                                                                                                                                                                                                                                            
------------------------- ----------                                                                                                                                                                                                                                                                        
Russell                   AD_PRES                                                                                                                                                                                                                                                                           
Russell                   SA_MAN                                                                                                                                                                                                                                                                            

SQL> ALTER TRIGGER secure_emp DISABLE
  2  /

Trigger altered.

SQL> ALTER TRIGGER secure_employees DISABLE
  2  /

Trigger altered.

SQL> CREATE OR REPLACE TRIGGER restrict_salary
  2  BEFORE INSERT OR UPDATE OF salary ON employees
  3  FOR EACH ROW
  4  BEGIN
  5    IF NOT (:NEW.job_id IN ('AD_PRES', 'AD_VP'))
  6       AND :NEW.salary > 15000 THEN
  7      RAISE_APPLICATION_ERROR (-20202,
  8        'Employee cannot earn more than $15,000.');
  9    END IF;
 10  END;
 11  /

Trigger created.

SQL> UPDATE employees
  2  SET salary = 15500
  3  WHERE last_name = 'Russell';
UPDATE employees
       *
ERROR at line 1:
ORA-20202: Employee cannot earn more than $15,000. 
ORA-06512: at "HR.RESTRICT_SALARY", line 4 
ORA-04088: error during execution of trigger 'HR.RESTRICT_SALARY' 


SQL> select  * from employees where last_name='Russell';

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
       1200 sdds                 Russell                   dfd                                                245454               23-JUN-89 AD_PRES         14520             .2        100            50                                                                                                  
        145 John                 Russell                   JRUSSEL                                            011.44.1344.429268   01-OCT-04 SA_MAN        20497.4             .4        100            80                                                                                                  

SQL> rollback
  2  ;

Rollback complete.

SQL> select  * from employees where last_name='Russell';

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
       1200 sdds                 Russell                   dfd                                                245454               23-JUN-89 AD_PRES         14520             .2        100            50                                                                                                  
        145 John                 Russell                   JRUSSEL                                            011.44.1344.429268   01-OCT-04 SA_MAN        20497.4             .4        100            80                                                                                                  

SQL> UPDATE employees
  2  SET salary = 15500
  3  WHERE last_name = 'Russell';
UPDATE employees
       *
ERROR at line 1:
ORA-20202: Employee cannot earn more than $15,000. 
ORA-06512: at "HR.RESTRICT_SALARY", line 4 
ORA-04088: error during execution of trigger 'HR.RESTRICT_SALARY' 


SQL> select  * from employees where last_name='Russell';

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
       1200 sdds                 Russell                   dfd                                                245454               23-JUN-89 AD_PRES         14520             .2        100            50                                                                                                  
        145 John                 Russell                   JRUSSEL                                            011.44.1344.429268   01-OCT-04 SA_MAN        20497.4             .4        100            80                                                                                                  

SQL> delete from employees where employee_id=145;
delete from employees where employee_id=145
*
ERROR at line 1:
ORA-02292: integrity constraint (HR.DEPT_MGR_FK) violated - child record found 


SQL> desc user_constraints;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 OWNER                                                                                                                                                                                  VARCHAR2(30)
 CONSTRAINT_NAME                                                                                                                                                               NOT NULL VARCHAR2(30)
 CONSTRAINT_TYPE                                                                                                                                                                        VARCHAR2(1)
 TABLE_NAME                                                                                                                                                                    NOT NULL VARCHAR2(30)
 SEARCH_CONDITION                                                                                                                                                                       LONG
 R_OWNER                                                                                                                                                                                VARCHAR2(30)
 R_CONSTRAINT_NAME                                                                                                                                                                      VARCHAR2(30)
 DELETE_RULE                                                                                                                                                                            VARCHAR2(9)
 STATUS                                                                                                                                                                                 VARCHAR2(8)
 DEFERRABLE                                                                                                                                                                             VARCHAR2(14)
 DEFERRED                                                                                                                                                                               VARCHAR2(9)
 VALIDATED                                                                                                                                                                              VARCHAR2(13)
 GENERATED                                                                                                                                                                              VARCHAR2(14)
 BAD                                                                                                                                                                                    VARCHAR2(3)
 RELY                                                                                                                                                                                   VARCHAR2(4)
 LAST_CHANGE                                                                                                                                                                            DATE
 INDEX_OWNER                                                                                                                                                                            VARCHAR2(30)
 INDEX_NAME                                                                                                                                                                             VARCHAR2(30)
 INVALID                                                                                                                                                                                VARCHAR2(7)
 VIEW_RELATED                                                                                                                                                                           VARCHAR2(14)

SQL> select constraint_name,table_name from user_constraints;

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
REGION_ID_NN                   REGIONS                                                                                                                                                                                                                                                                      
COUNTRY_ID_NN                  COUNTRIES                                                                                                                                                                                                                                                                    
LOC_CITY_NN                    LOCATIONS                                                                                                                                                                                                                                                                    
DEPT_NAME_NN                   DEPARTMENTS                                                                                                                                                                                                                                                                  
JOB_TITLE_NN                   JOBS                                                                                                                                                                                                                                                                         
EMP_LAST_NAME_NN               EMPLOYEES                                                                                                                                                                                                                                                                    
EMP_EMAIL_NN                   EMPLOYEES                                                                                                                                                                                                                                                                    
EMP_HIRE_DATE_NN               EMPLOYEES                                                                                                                                                                                                                                                                    
EMP_JOB_NN                     EMPLOYEES                                                                                                                                                                                                                                                                    
EMP_SALARY_MIN                 EMPLOYEES                                                                                                                                                                                                                                                                    
JHIST_EMPLOYEE_NN              JOB_HISTORY                                                                                                                                                                                                                                                                  
JHIST_START_DATE_NN            JOB_HISTORY                                                                                                                                                                                                                                                                  
JHIST_END_DATE_NN              JOB_HISTORY                                                                                                                                                                                                                                                                  
JHIST_JOB_NN                   JOB_HISTORY                                                                                                                                                                                                                                                                  
JHIST_DATE_INTERVAL            JOB_HISTORY                                                                                                                                                                                                                                                                  
SYS_C0011032                   EMP_DETAILS_VIEW                                                                                                                                                                                                                                                             
SYS_C0011550                   EMP3                                                                                                                                                                                                                                                                         

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
SYS_C0011551                   EMP3                                                                                                                                                                                                                                                                         
SYS_C0011552                   EMP3                                                                                                                                                                                                                                                                         
SYS_C0011553                   EMP3                                                                                                                                                                                                                                                                         
CK2                            TEST                                                                                                                                                                                                                                                                         
SYS_C0011766                   LOC                                                                                                                                                                                                                                                                          
SYS_C0011875                   EMPLOYEES3                                                                                                                                                                                                                                                                   
SYS_C0011876                   EMPLOYEES3                                                                                                                                                                                                                                                                   
SYS_C0011877                   EMPLOYEES3                                                                                                                                                                                                                                                                   
SYS_C0011878                   EMPLOYEES3                                                                                                                                                                                                                                                                   
BIN$cuc2kz66TN6R9DFIyBfjHA==$0 BIN$LNkxUaaASFGVWjR8XrXRvw==$0                                                                                                                                                                                                                                               
BIN$PFe179QKSxaAOVWLzyiIXw==$0 BIN$LNkxUaaASFGVWjR8XrXRvw==$0                                                                                                                                                                                                                                               
BIN$gy9F6N5MRgGUwU9Zbko/yA==$0 BIN$LNkxUaaASFGVWjR8XrXRvw==$0                                                                                                                                                                                                                                               
BIN$0b3IDKWYTV+eEVrh2rULAQ==$0 BIN$LNkxUaaASFGVWjR8XrXRvw==$0                                                                                                                                                                                                                                               
SYS_C0012052                   REWARDS                                                                                                                                                                                                                                                                      
SYS_C0012053                   REWARDS                                                                                                                                                                                                                                                                      
SYS_C0012619                   HBEMPLOYEEDETAILS                                                                                                                                                                                                                                                            
SYS_C0012621                   EMPLOYEES2                                                                                                                                                                                                                                                                   

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
SYS_C0012622                   EMPLOYEES2                                                                                                                                                                                                                                                                   
SYS_C0012623                   EMPLOYEES2                                                                                                                                                                                                                                                                   
SYS_C0012624                   EMPLOYEES2                                                                                                                                                                                                                                                                   
BIN$uCwDgj6IRS26zlbQWW6ceg==$0 BIN$2124MxlzR/ODvocoPOzW5A==$0                                                                                                                                                                                                                                               
BIN$xK+73y60QAG1C3TtVlVKcQ==$0 BIN$2124MxlzR/ODvocoPOzW5A==$0                                                                                                                                                                                                                                               
BIN$QymgllfSTViAw69a++cVMQ==$0 BIN$2124MxlzR/ODvocoPOzW5A==$0                                                                                                                                                                                                                                               
BIN$m2b/I/qgRE6bQz4KjjkQgw==$0 BIN$2124MxlzR/ODvocoPOzW5A==$0                                                                                                                                                                                                                                               
SYS_C0013067                   NEW_EMPS                                                                                                                                                                                                                                                                     
SYS_C0013068                   NEW_DEPTS                                                                                                                                                                                                                                                                    
BIN$yHw84GRvRJuWPLoYjMfkBg==$0 BIN$TO0Bs+SwTgGkY1baezlrRw==$0                                                                                                                                                                                                                                               
SYS_C0013476                   SALES_REPS                                                                                                                                                                                                                                                                   
SYS_C0013477                   SALES_REPS2                                                                                                                                                                                                                                                                  
SYS_C0014139                   EMPVU10                                                                                                                                                                                                                                                                      
CK                             EMPVU20                                                                                                                                                                                                                                                                      
BIN$I5KZsc/lT2CgCSuFCGH5TQ==$0 BIN$TO0Bs+SwTgGkY1baezlrRw==$0                                                                                                                                                                                                                                               
BIN$WoMnCdegTrq4q0KTG6tX7w==$0 BIN$TO0Bs+SwTgGkY1baezlrRw==$0                                                                                                                                                                                                                                               
BIN$4hQ87+fQRqGj5NDlc+6Cug==$0 BIN$TO0Bs+SwTgGkY1baezlrRw==$0                                                                                                                                                                                                                                               

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
BIN$rMEGpzEsQSCPgWdUj/f37g==$0 BIN$N+SBKxVnT3SD+f6bDgIcXw==$0                                                                                                                                                                                                                                               
BIN$3uzziwMGQR+YNzNwLv2mXg==$0 BIN$N+SBKxVnT3SD+f6bDgIcXw==$0                                                                                                                                                                                                                                               
BIN$pDmoO3h6Rk67NBejvyovlw==$0 BIN$N+SBKxVnT3SD+f6bDgIcXw==$0                                                                                                                                                                                                                                               
MY1NLL                         MY1                                                                                                                                                                                                                                                                          
CHMY1                          MY1                                                                                                                                                                                                                                                                          
SYS_C0013594                   MY3                                                                                                                                                                                                                                                                          
SYS_C0013595                   MY3                                                                                                                                                                                                                                                                          
BIN$qalJqlGzQ0uxbYXXXB8eHg==$0 BIN$N+SBKxVnT3SD+f6bDgIcXw==$0                                                                                                                                                                                                                                               
BIN$w3HWQSX9S2KbPR/t+UsssA==$0 BIN$O2eCo8YXTFafsaYrzFPWhw==$0                                                                                                                                                                                                                                               
BIN$ywMdhArfQzGKw7XZN84uVQ==$0 BIN$O2eCo8YXTFafsaYrzFPWhw==$0                                                                                                                                                                                                                                               
BIN$yv2w4uJTT5qTZu35oQO6vw==$0 BIN$O2eCo8YXTFafsaYrzFPWhw==$0                                                                                                                                                                                                                                               
BIN$IFdGJgNqRLaGAMo4YHS1xg==$0 BIN$O2eCo8YXTFafsaYrzFPWhw==$0                                                                                                                                                                                                                                               
BIN$RRo0g4ZoQ8yWgHqmCktevA==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
BIN$/sA2+77YS9yYpxe7I28HdQ==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
BIN$quI2KY2uR9+fbspk+Ma9UA==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
BIN$V8NqB8TlQ1yOSR54NoKuMw==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
SYS_C0014219                   EMP_TEST                                                                                                                                                                                                                                                                     

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
BIN$h36BpcHESjOypOHXaPmEpA==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
BIN$M+wFnINaRG6q1pI6/IwJ0Q==$0 BIN$EFDPBSJjQX+5iH2FenQgxw==$0                                                                                                                                                                                                                                               
SYS_C0014148                   JAY                                                                                                                                                                                                                                                                          
SYS_C0014149                   JAY                                                                                                                                                                                                                                                                          
SYS_C0014218                   DEPT                                                                                                                                                                                                                                                                         
SYS_C0014220                   EMP_TEST                                                                                                                                                                                                                                                                     
SYS_C0014221                   EMP_TEST                                                                                                                                                                                                                                                                     
SYS_C0014222                   EMP_TEST                                                                                                                                                                                                                                                                     
SYS_C0014223                   EMPL3                                                                                                                                                                                                                                                                        
SYS_C0014224                   EMPL3                                                                                                                                                                                                                                                                        
SYS_C0014055                   JAY2                                                                                                                                                                                                                                                                         
CHJAY2                         JAY2                                                                                                                                                                                                                                                                         
SYS_C0014225                   EMPL3                                                                                                                                                                                                                                                                        
SYS_C0014226                   EMPL3                                                                                                                                                                                                                                                                        
SYS_C0014227                   EMPL4                                                                                                                                                                                                                                                                        
SYS_C0014228                   EMPL4                                                                                                                                                                                                                                                                        
SYS_C0014229                   EMPL4                                                                                                                                                                                                                                                                        

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
SYS_C0014230                   EMPL4                                                                                                                                                                                                                                                                        
SYS_C0014316                   COPY_EMP3                                                                                                                                                                                                                                                                    
SYS_C0014317                   COPY_EMP3                                                                                                                                                                                                                                                                    
SYS_C0014318                   COPY_EMP3                                                                                                                                                                                                                                                                    
SYS_C0014319                   COPY_EMP3                                                                                                                                                                                                                                                                    
SYS_C0014320                   EMP                                                                                                                                                                                                                                                                          
SYS_C0014321                   EMP                                                                                                                                                                                                                                                                          
SYS_C0014322                   EMP                                                                                                                                                                                                                                                                          
SYS_C0014323                   EMP                                                                                                                                                                                                                                                                          
SYS_C0014324                   EMPL6                                                                                                                                                                                                                                                                        
SYS_C0014325                   EMPL6                                                                                                                                                                                                                                                                        
SYS_C0014326                   EMPL6                                                                                                                                                                                                                                                                        
SYS_C0014327                   EMPL6                                                                                                                                                                                                                                                                        
SYS_C0014557                   TEMP_EMP                                                                                                                                                                                                                                                                     
SYS_C0014558                   TEMP_EMP                                                                                                                                                                                                                                                                     
SYS_C0014559                   TEMP_EMP                                                                                                                                                                                                                                                                     
SYS_C0014560                   TEMP_EMP                                                                                                                                                                                                                                                                     

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
SYS_C0011565                   A2                                                                                                                                                                                                                                                                           
DEPT_MGR_FK                    DEPARTMENTS                                                                                                                                                                                                                                                                  
EMP_MANAGER_FK                 EMPLOYEES                                                                                                                                                                                                                                                                    
JHIST_EMP_FK                   JOB_HISTORY                                                                                                                                                                                                                                                                  
EMP_JOB_FK                     EMPLOYEES                                                                                                                                                                                                                                                                    
JHIST_JOB_FK                   JOB_HISTORY                                                                                                                                                                                                                                                                  
EMP_DEPT_FK                    EMPLOYEES                                                                                                                                                                                                                                                                    
JHIST_DEPT_FK                  JOB_HISTORY                                                                                                                                                                                                                                                                  
SYS_C0011568                   EMPLOYEE_NAMES2                                                                                                                                                                                                                                                              
FKMY1                          MY1                                                                                                                                                                                                                                                                          
SYS_C0013598                   MY3                                                                                                                                                                                                                                                                          
FKJAY2                         JAY2                                                                                                                                                                                                                                                                         
DEPT_LOC_FK                    DEPARTMENTS                                                                                                                                                                                                                                                                  
LOC_C_ID_FK                    LOCATIONS                                                                                                                                                                                                                                                                    
COUNTR_REG_FK                  COUNTRIES                                                                                                                                                                                                                                                                    
REG_ID_PK                      REGIONS                                                                                                                                                                                                                                                                      
COUNTRY_C_ID_PK                COUNTRIES                                                                                                                                                                                                                                                                    

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
LOC_ID_PK                      LOCATIONS                                                                                                                                                                                                                                                                    
DEPT_ID_PK                     DEPARTMENTS                                                                                                                                                                                                                                                                  
JOB_ID_PK                      JOBS                                                                                                                                                                                                                                                                         
EMP_EMAIL_UK                   EMPLOYEES                                                                                                                                                                                                                                                                    
EMP_EMP_ID_PK                  EMPLOYEES                                                                                                                                                                                                                                                                    
JHIST_EMP_ID_ST_DATE_PK        JOB_HISTORY                                                                                                                                                                                                                                                                  
SYS_C0011564                   A1                                                                                                                                                                                                                                                                           
SYS_C0011567                   EMPLOYEE_NAMES2                                                                                                                                                                                                                                                              
MKPK2                          MARKETING                                                                                                                                                                                                                                                                    
SYS_C0011760                   EMP_UNNAMED_INDEX                                                                                                                                                                                                                                                            
SYS_C0011761                   NEW_EMP2                                                                                                                                                                                                                                                                     
SYS_C0012620                   HBEMPLOYEEDETAILS                                                                                                                                                                                                                                                            
SYS_C0012918                   EMPLOYEE_NAMES                                                                                                                                                                                                                                                               
PK11                           TXN                                                                                                                                                                                                                                                                          
PKMY1                          MY1                                                                                                                                                                                                                                                                          
UMY1                           MY1                                                                                                                                                                                                                                                                          
SYS_C0013596                   MY3                                                                                                                                                                                                                                                                          

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
SYS_C0013597                   MY3                                                                                                                                                                                                                                                                          
SYS_C0013660                   E1                                                                                                                                                                                                                                                                           
SYS_C0013661                   E2                                                                                                                                                                                                                                                                           
SYS_C0013662                   E3                                                                                                                                                                                                                                                                           
PKJAY2                         JAY2                                                                                                                                                                                                                                                                         
UJAY2                          JAY2                                                                                                                                                                                                                                                                         
BIN$QGOaDnOuRt2vJx/a6pfGaw==$0 NEW_EMP                                                                                                                                                                                                                                                                      
NEW_EMPPK                      NEW_EMP3                                                                                                                                                                                                                                                                     
PKNUM                          NUM_TABLE                                                                                                                                                                                                                                                                    
T1PK                           T1                                                                                                                                                                                                                                                                           
T3FK                           T3                                                                                                                                                                                                                                                                           

147 rows selected.

SQL> select constraint_name,table_name from user_constraints where CONSTRAINT_NAME='DEPT_MGR_FK';

CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                                                   
------------------------------ ------------------------------                                                                                                                                                                                                                                               
DEPT_MGR_FK                    DEPARTMENTS                                                                                                                                                                                                                                                                  

SQL> select  * from employees where last_name='Russell';

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
       1200 sdds                 Russell                   dfd                                                245454               23-JUN-89 AD_PRES         14520             .2        100            50                                                                                                  
        145 John                 Russell                   JRUSSEL                                            011.44.1344.429268   01-OCT-04 SA_MAN        20497.4             .4        100            80                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE MANAGER_ID=100;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          670 Media                                 100        1800                                                                                                                                                                                                                                         
          700 Media                                 100        1800                                                                                                                                                                                                                                         
          280 hr                                    100        1700                                                                                                                                                                                                                                         
          530 Media                                 100        1800                                                                                                                                                                                                                                         
           90 Executive                             100        1700                                                                                                                                                                                                                                         
          370 Public relation                       100        1700                                                                                                                                                                                                                                         

6 rows selected.

SQL> SELECT * FROM DEPARTMENTS WHERE MANAGER_ID=1200;

no rows selected

SQL> DESC USER_CONS_COLUMNS;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 OWNER                                                                                                                                                                         NOT NULL VARCHAR2(30)
 CONSTRAINT_NAME                                                                                                                                                               NOT NULL VARCHAR2(30)
 TABLE_NAME                                                                                                                                                                    NOT NULL VARCHAR2(30)
 COLUMN_NAME                                                                                                                                                                            VARCHAR2(4000)
 POSITION                                                                                                                                                                               NUMBER

SQL> SELECT * FROM USER_CONS_COLUMNS WHERE CONSTRAINT_NAME='DEPT_MGR_FK';

OWNER                          CONSTRAINT_NAME                TABLE_NAME                                                                                                                                                                                                                                    
------------------------------ ------------------------------ ------------------------------                                                                                                                                                                                                                
COLUMN_NAME                                                                                                                                                                                                                                                                                                 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  POSITION                                                                                                                                                                                                                                                                                                  
----------                                                                                                                                                                                                                                                                                                  
HR                             DEPT_MGR_FK                    DEPARTMENTS                                                                                                                                                                                                                                   
MANAGER_ID                                                                                                                                                                                                                                                                                                  
         1                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                            

SQL> SELECT * FROM EMPLOYEES WHERE LAST_NAME='Russell';

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
       1200 sdds                 Russell                   dfd                                                245454               23-JUN-89 AD_PRES         14520             .2        100            50                                                                                                  
        145 John                 Russell                   JRUSSEL                                            011.44.1344.429268   01-OCT-04 SA_MAN        20497.4             .4        100            80                                                                                                  

SQL> select * from departments where manager_id=1200;

no rows selected

SQL> select * from departments where manager_id=145;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
           80 Sales                                 145        2500                                                                                                                                                                                                                                         

SQL> desc emp;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 EMPLOYEE_ID                                                                                                                                                                            NUMBER(6)
 FIRST_NAME                                                                                                                                                                             VARCHAR2(20)
 LAST_NAME                                                                                                                                                                     NOT NULL VARCHAR2(25)
 EMAIL                                                                                                                                                                         NOT NULL VARCHAR2(50)
 PHONE_NUMBER                                                                                                                                                                           VARCHAR2(20)
 HIRE_DATE                                                                                                                                                                     NOT NULL TIMESTAMP(6)
 JOB_ID                                                                                                                                                                        NOT NULL VARCHAR2(10)
 SALARY                                                                                                                                                                                 NUMBER(8,2)
 COMMISSION_PCT                                                                                                                                                                         NUMBER(2,2)
 MANAGER_ID                                                                                                                                                                             NUMBER(6)
 DEPARTMENT_ID                                                                                                                                                                          NUMBER(4)

SQL> select * from emp;

no rows selected

SQL> drop table emp;

Table dropped.

SQL> create table emp as select * from employees;

Table created.

SQL> CREATE OR REPLACE TRIGGER restrict_salary
  2  BEFORE INSERT OR UPDATE OF salary ON employees
  3  FOR EACH ROW
  4  BEGIN
  5    IF NOT (:NEW.job_id IN ('AD_PRES', 'AD_VP'))
  6       AND :NEW.salary > 15000 THEN
  7      RAISE_APPLICATION_ERROR (-20202,
  8        'Employee cannot earn more than $15,000.');
  9    END IF;
 10  END;
 11  /

Trigger created.

SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE TRIGGER restrict_salary
  2  BEFORE INSERT OR UPDATE OF salary ON emp
  3  FOR EACH ROW
  4  BEGIN
  5    IF NOT (:NEW.job_id IN ('AD_PRES', 'AD_VP'))
  6       AND :NEW.salary > 15000 THEN
  7      RAISE_APPLICATION_ERROR (-20202,
  8        'Employee cannot earn more than $15,000.');
  9    END IF;
 10* END;
SQL> /
CREATE OR REPLACE TRIGGER restrict_salary
                          *
ERROR at line 1:
ORA-04095: trigger 'RESTRICT_SALARY' already exists on another table, cannot replace it 


SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE TRIGGER restrict_salary1
  2  BEFORE INSERT OR UPDATE OF salary ON emp
  3  FOR EACH ROW
  4  BEGIN
  5    IF NOT (:NEW.job_id IN ('AD_PRES', 'AD_VP'))
  6       AND :NEW.salary > 15000 THEN
  7      RAISE_APPLICATION_ERROR (-20202,
  8        'Employee cannot earn more than $15,000.');
  9    END IF;
 10* END;
SQL> /

Trigger created.

SQL> update emp set salary=15500 where last_name='Russell';
update emp set salary=15500 where last_name='Russell'
       *
ERROR at line 1:
ORA-20202: Employee cannot earn more than $15,000. 
ORA-06512: at "HR.RESTRICT_SALARY1", line 4 
ORA-04088: error during execution of trigger 'HR.RESTRICT_SALARY1' 


SQL> select salary from emp where last_name='Russell';

    SALARY                                                                                                                                                                                                                                                                                                  
----------                                                                                                                                                                                                                                                                                                  
     14520                                                                                                                                                                                                                                                                                                  
   20497.4                                                                                                                                                                                                                                                                                                  

SQL> delete from emp where employee_id=145;

1 row deleted.

SQL> update emp set salary=15500 where last_name='Russell';

1 row updated.

SQL> DROP TABLE audit_emp
  2  /

Table dropped.

SQL> CREATE TABLE audit_emp (
  2    user_name     VARCHAR2(30),
  3    time_stamp    date,
  4    id            NUMBER(6),
  5    old_last_name VARCHAR2(25),
  6    new_last_name VARCHAR2(25),
  7    old_title     VARCHAR2(10),
  8    new_title     VARCHAR2(10),
  9    old_salary    NUMBER(8,2),
 10    new_salary    NUMBER(8,2)
 11  )
 12  /

Table created.

SQL> CREATE OR REPLACE TRIGGER audit_emp_values
  2  AFTER DELETE OR INSERT OR UPDATE ON employees
  3  FOR EACH ROW
  4  BEGIN
  5    INSERT INTO audit_emp(user_name, time_stamp, id,
  6      old_last_name, new_last_name, old_title,
  7      new_title, old_salary, new_salary)
  8    VALUES (USER, SYSDATE, :OLD.employee_id,
  9      :OLD.last_name, :NEW.last_name, :OLD.job_id,
 10      :NEW.job_id, :OLD.salary, :NEW.salary);
 11  END;
 12  
 13  /

Trigger created.

SQL> INSERT INTO employees (employee_id, last_name, job_id, salary, email, hire_date)
  2  VALUES (999, 'Temp emp', 'SA_REP', 6000, 'TEMPEMP', TRUNC(SYSDATE))
  3  /
INSERT INTO employees (employee_id, last_name, job_id, salary, email, hire_date)
*
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMAIL_UK) violated 


SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO employees (employee_id, last_name, job_id, salary, email, hire_date)
  2* VALUES (999, 'Temp emp', 'SA_REP', 6000, 'TEMPEMP12', TRUNC(SYSDATE))
SQL> /
INSERT INTO employees (employee_id, last_name, job_id, salary, email, hire_date)
*
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMP_ID_PK) violated 


SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO employees (employee_id, last_name, job_id, salary, email, hire_date)
  2* VALUES (1999, 'Temp emp', 'SA_REP', 6000, 'TEMPEMP12', TRUNC(SYSDATE))
SQL> /

1 row created.

SQL> UPDATE employees
  2   SET salary = 7000, last_name = 'Smith'
  3   WHERE employee_id = 999
  4  ;

1 row updated.

SQL> SELECT  *
  2  FROM  audit_emp;

USER_NAME                      TIME_STAM         ID OLD_LAST_NAME             NEW_LAST_NAME             OLD_TITLE  NEW_TITLE  OLD_SALARY NEW_SALARY                                                                                                                                                         
------------------------------ --------- ---------- ------------------------- ------------------------- ---------- ---------- ---------- ----------                                                                                                                                                         
HR                             28-MAR-17                                      Temp emp                             SA_REP                      6000                                                                                                                                                         
HR                             28-MAR-17        999 Smith                     Smith                     SA_REP     SA_REP           8470       7000                                                                                                                                                         

SQL> exit
SQL> set lines 300
SQL> set pages 20
SQL> set serveroutput on
SQL> UPDATE employees SET department_id = 999
  2   WHERE employee_id = 170;

0 rows updated.

SQL> ed
Wrote file afiedt.buf

  1  UPDATE employees SET department_id = 999
  2*  WHERE employee_id = 180
SQL> /
UPDATE employees SET department_id = 999
*
ERROR at line 1:
ORA-02291: integrity constraint (HR.EMP_DEPT_FK) violated - parent key not found 


SQL> CREATE OR REPLACE TRIGGER employee_dept_fk_trg
  2  AFTER UPDATE OF department_id
  3  ON employees FOR EACH ROW
  4  BEGIN
  5   INSERT INTO departments VALUES(:new.department_id,
  6       'Dept '||:new.department_id, NULL, NULL);
  7  EXCEPTION
  8     WHEN DUP_VAL_ON_INDEX THEN
  9      NULL; -- mask exception if department exists
 10  END;
 11  /

Trigger created.

SQL> UPDATE employees SET department_id = 999
  2   WHERE employee_id = 180;

1 row updated.

SQL> select * from employees where employee_id=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120           999                                                                                                  

SQL> select * from departments where department_id=999;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          999 Dept 999                                                                                                                                                                                                                                                                                      

SQL> desc user_constraints;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 OWNER                                                                                                                                                                                  VARCHAR2(30)
 CONSTRAINT_NAME                                                                                                                                                               NOT NULL VARCHAR2(30)
 CONSTRAINT_TYPE                                                                                                                                                                        VARCHAR2(1)
 TABLE_NAME                                                                                                                                                                    NOT NULL VARCHAR2(30)
 SEARCH_CONDITION                                                                                                                                                                       LONG
 R_OWNER                                                                                                                                                                                VARCHAR2(30)
 R_CONSTRAINT_NAME                                                                                                                                                                      VARCHAR2(30)
 DELETE_RULE                                                                                                                                                                            VARCHAR2(9)
 STATUS                                                                                                                                                                                 VARCHAR2(8)
 DEFERRABLE                                                                                                                                                                             VARCHAR2(14)
 DEFERRED                                                                                                                                                                               VARCHAR2(9)
 VALIDATED                                                                                                                                                                              VARCHAR2(13)
 GENERATED                                                                                                                                                                              VARCHAR2(14)
 BAD                                                                                                                                                                                    VARCHAR2(3)
 RELY                                                                                                                                                                                   VARCHAR2(4)
 LAST_CHANGE                                                                                                                                                                            DATE
 INDEX_OWNER                                                                                                                                                                            VARCHAR2(30)
 INDEX_NAME                                                                                                                                                                             VARCHAR2(30)
 INVALID                                                                                                                                                                                VARCHAR2(7)
 VIEW_RELATED                                                                                                                                                                           VARCHAR2(14)

SQL> select deferred from user_constraints where CONSTRAINT_NAME='EMP_DEPT_FK';

DEFERRED                                                                                                                                                                                                                                                                                                    
---------                                                                                                                                                                                                                                                                                                   
IMMEDIATE                                                                                                                                                                                                                                                                                                   

SQL> ROLLBACK;

Rollback complete.

SQL> CREATE OR REPLACE TRIGGER employee_dept_fk_trg
  2  AFTER UPDATE OF department_id
  3  ON employees FOR EACH ROW
  4  BEGIN
  5   INSERT INTO departments VALUES(:new.department_id,
  6       'Dept '||:new.department_id, NULL, NULL);
  7  EXCEPTION
  8     WHEN DUP_VAL_ON_INDEX THEN
  9      NULL; -- mask exception if department exists
 10  END;
 11  /

Trigger created.

SQL> ED
Wrote file afiedt.buf

  1  CREATE OR REPLACE TRIGGER employee_dept_fk_trg
  2  BEFORE UPDATE OF department_id
  3  ON employees FOR EACH ROW
  4  BEGIN
  5   INSERT INTO departments VALUES(:new.department_id,
  6       'Dept '||:new.department_id, NULL, NULL);
  7  EXCEPTION
  8     WHEN DUP_VAL_ON_INDEX THEN
  9      NULL; -- mask exception if department exists
 10* END;
SQL> /

Trigger created.

SQL> UPDATE employees SET department_id = 999
  2   WHERE employee_id = 180;

1 row updated.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120           999                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          999 Dept 999                                                                                                                                                                                                                                                                                      

SQL> ROLLBACK;

Rollback complete.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120            50                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

no rows selected

SQL> ALTER SESSION ALL CONSTRAINTS IMMEDIATE;
ALTER SESSION ALL CONSTRAINTS IMMEDIATE
              *
ERROR at line 1:
ORA-00922: missing or invalid option 


SQL> ALTER SESSION SET CONSTRAINTS=IMMEDIATE;

Session altered.

SQL> UPDATE EMPLOYEES SET DEPARTMENT_ID=999 WHERE EMPLOYEE_ID=180;

1 row updated.

SQL> SELECT * FROM EMPLOYEES WHERE WHERE EMPLOYEE_ID=180;
SELECT * FROM EMPLOYEES WHERE WHERE EMPLOYEE_ID=180
                              *
ERROR at line 1:
ORA-00936: missing expression 


SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120           999                                                                                                  

SQL> ROLLBACK;

Rollback complete.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120            50                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

no rows selected

SQL> COMMIT;

Commit complete.

SQL> ALTER SESSION ALL CONSTRAINTS IMMEDIATE;
ALTER SESSION ALL CONSTRAINTS IMMEDIATE
              *
ERROR at line 1:
ORA-00922: missing or invalid option 


SQL> ALTER SESSION SET CONSTRAINTS=IMMEDIATE;

Session altered.

SQL> UPDATE EMPLOYEES SET DEPARTMENT_ID=999 WHERE EMPLOYEE_ID=180;

1 row updated.

SQL> DROP TRIGGER employee_dept_fk_trg1;
DROP TRIGGER employee_dept_fk_trg1
*
ERROR at line 1:
ORA-04080: trigger 'EMPLOYEE_DEPT_FK_TRG1' does not exist 


SQL> DROP TRIGGER employee_dept_fk_trg;

Trigger dropped.

SQL> ROLLBACK;

Rollback complete.

SQL> COMMIT;

Commit complete.

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          999 Dept 999                                                                                                                                                                                                                                                                                      

SQL> DELETE FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;
DELETE FROM DEPARTMENTS WHERE DEPARTMENT_ID=999
*
ERROR at line 1:
ORA-02292: integrity constraint (HR.EMP_DEPT_FK) violated - child record found 


SQL> ROLLBACK;

Rollback complete.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120           999                                                                                                  

SQL> UPDATE EMPLOYEES SET DEPARTMENT_ID=50 WHERE EMPLOYEE_ID=180;

1 row updated.

SQL> DELETE FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

1 row deleted.

SQL> COMMIT;

Commit complete.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120            50                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

no rows selected

SQL> ALTER SESSION SET CONSTRAINTS=IMMEDIATE;

Session altered.

SQL> UPDATE EMPLOYEES SET DEPARTMENT_ID=999 WHERE EMPLOYEE_ID=180;
UPDATE EMPLOYEES SET DEPARTMENT_ID=999 WHERE EMPLOYEE_ID=180
*
ERROR at line 1:
ORA-02291: integrity constraint (HR.EMP_DEPT_FK) violated - parent key not found 


SQL> CREATE OR REPLACE TRIGGER employee_dept_fk_trg
  2  AFTER UPDATE OF department_id
  3  ON employees FOR EACH ROW
  4  BEGIN
  5   INSERT INTO departments VALUES(:new.department_id,
  6       'Dept '||:new.department_id, NULL, NULL);
  7  EXCEPTION
  8     WHEN DUP_VAL_ON_INDEX THEN
  9      NULL; -- mask exception if department exists
 10  END;
 11  /

Trigger created.

SQL> UPDATE EMPLOYEES SET DEPARTMENT_ID=999 WHERE EMPLOYEE_ID=180;

1 row updated.

SQL> SELECT * FROM EMPLOYEES WHERE EMPLOYEE_ID=180;

EMPLOYEE_ID FIRST_NAME           LAST_NAME                 EMAIL                                              PHONE_NUMBER         HIRE_DATE JOB_ID         SALARY COMMISSION_PCT MANAGER_ID DEPARTMENT_ID                                                                                                  
----------- -------------------- ------------------------- -------------------------------------------------- -------------------- --------- ---------- ---------- -------------- ---------- -------------                                                                                                  
        180 Winston              Taylor                    WTAYLOR                                            650.507.9876         24-JAN-06 SH_CLERK      4685.12                       120           999                                                                                                  

SQL> SELECT * FROM DEPARTMENTS WHERE DEPARTMENT_ID=999;

DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID LOCATION_ID                                                                                                                                                                                                                                         
------------- ------------------------------ ---------- -----------                                                                                                                                                                                                                                         
          999 Dept 999                                                                                                                                                                                                                                                                                      

SQL> EXIT
SQL> set lines 300
SQL> set pages 20
SQL> desc new_emps;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 EMPLOYEE_ID                                                                                                                                                                            NUMBER(6)
 LAST_NAME                                                                                                                                                                     NOT NULL VARCHAR2(25)
 SALARY                                                                                                                                                                                 NUMBER(8,2)
 DEPARTMENT_ID                                                                                                                                                                          NUMBER(4)

SQL> select * from new_emps;

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        198 OConnell                        3146            50                                                                                                                                                                                                                                              
        199 Grant                           3146            50                                                                                                                                                                                                                                              
        200 Whalen                          5324            10                                                                                                                                                                                                                                              
        201 Hartstein                      15730            20                                                                                                                                                                                                                                              
        202 Fay                             7260            20                                                                                                                                                                                                                                              
        203 Mavris                          7865            40                                                                                                                                                                                                                                              
        204 Baer                           12100            70                                                                                                                                                                                                                                              
        205 Higgins                     14529.68           110                                                                                                                                                                                                                                              
        206 Gietz                          10043           110                                                                                                                                                                                                                                              
        300 Smith                           4950            60                                                                                                                                                                                                                                              
       1000 b                               3850            50                                                                                                                                                                                                                                              
       1001 b                               6600            50                                                                                                                                                                                                                                              
       3000 Smith                           4500            60                                                                                                                                                                                                                                              
       1200 Russell                        12000            50                                                                                                                                                                                                                                              
        999 Smith                           7000                                                                                                                                                                                                                                                            
        100 King                         3689.53            90                                                                                                                                                                                                                                              
        101 Kochhar                      1200.56            90                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        102 De Haan                      2613.42            90                                                                                                                                                                                                                                              
        103 Hunold                         10890            60                                                                                                                                                                                                                                              
        104 Ernst                        1132.38            60                                                                                                                                                                                                                                              
        105 Austin                          5808            60                                                                                                                                                                                                                                              
        106 Pataballa                       5808            60                                                                                                                                                                                                                                              
        107 Lorentz                         5082            60                                                                                                                                                                                                                                              
        108 Greenberg                   15982.65           100                                                                                                                                                                                                                                              
        109 Faviet                         10890           100                                                                                                                                                                                                                                              
        110 Chen                         12605.9           100                                                                                                                                                                                                                                              
        111 Sciarra                         9317           100                                                                                                                                                                                                                                              
        112 Urman                           9438           100                                                                                                                                                                                                                                              
        113 Popp                            8349           100                                                                                                                                                                                                                                              
        114 Raphaely                       13310            30                                                                                                                                                                                                                                              
        115 Khoo                            3751            30                                                                                                                                                                                                                                              
        116 Baida                           3509            30                                                                                                                                                                                                                                              
        117 Tobias                          3388            30                                                                                                                                                                                                                                              
        118 Himuro                          3146            30                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        119 Colmenares                      3025            30                                                                                                                                                                                                                                              
        120 Weiss                           9680            50                                                                                                                                                                                                                                              
        121 Fripp                           9922            50                                                                                                                                                                                                                                              
        122 Kaufling                        9559            50                                                                                                                                                                                                                                              
        123 Vollman                         7865            50                                                                                                                                                                                                                                              
        124 Mourgos                         7018            50                                                                                                                                                                                                                                              
        125 Nayer                           3872            50                                                                                                                                                                                                                                              
        126 Mikkilineni                     3267            50                                                                                                                                                                                                                                              
        127 Landry                          2904            50                                                                                                                                                                                                                                              
        128 Markle                          2662            50                                                                                                                                                                                                                                              
        129 Bissot                          3993            50                                                                                                                                                                                                                                              
        130 Atkinson                        3388            50                                                                                                                                                                                                                                              
        131 Marlow                          3025            50                                                                                                                                                                                                                                              
        132 Olson                           2541            50                                                                                                                                                                                                                                              
        133 Mallin                          3993            50                                                                                                                                                                                                                                              
        134 Rogers                          3509            50                                                                                                                                                                                                                                              
        135 Gee                             2904            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        136 Philtanker                      2662            50                                                                                                                                                                                                                                              
        137 Ladwig                          4356            50                                                                                                                                                                                                                                              
        138 Stiles                          3740            50                                                                                                                                                                                                                                              
        139 Seo                             3267            50                                                                                                                                                                                                                                              
        140 Patel                           3025            50                                                                                                                                                                                                                                              
        141 Rajs                            4235            50                                                                                                                                                                                                                                              
        142 Davies                          3751            50                                                                                                                                                                                                                                              
        143 Matos                           3146            50                                                                                                                                                                                                                                              
        144 Vargas                          3025            50                                                                                                                                                                                                                                              
        145 Russell                        16940            80                                                                                                                                                                                                                                              
        146 Partners                       16335            80                                                                                                                                                                                                                                              
        147 Errazuriz                      14520            80                                                                                                                                                                                                                                              
        148 Cambrault                      13310            80                                                                                                                                                                                                                                              
        149 Zlotkey                        12705            80                                                                                                                                                                                                                                              
        150 Tucker                         12100            80                                                                                                                                                                                                                                              
        151 Bernstein                      11495            80                                                                                                                                                                                                                                              
        152 Hall                           10890            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        153 Olsen                           9680            80                                                                                                                                                                                                                                              
        154 Cambrault                       9075            80                                                                                                                                                                                                                                              
        155 Tuvault                         8470            80                                                                                                                                                                                                                                              
        156 King                           12100            80                                                                                                                                                                                                                                              
        157 Sully                          11495            80                                                                                                                                                                                                                                              
        158 McEwen                         10890            80                                                                                                                                                                                                                                              
        159 Smith                           9680            80                                                                                                                                                                                                                                              
        160 Doran                           9075            80                                                                                                                                                                                                                                              
        161 Sewall                          8470            80                                                                                                                                                                                                                                              
        162 Vishney                        12705            80                                                                                                                                                                                                                                              
        163 Greene                         11495            80                                                                                                                                                                                                                                              
        164 Marvins                         8712            80                                                                                                                                                                                                                                              
        165 Lee                             8228            80                                                                                                                                                                                                                                              
        166 Ande                            7744            80                                                                                                                                                                                                                                              
        167 Banda                           7502            80                                                                                                                                                                                                                                              
        168 Ozer                           13915            80                                                                                                                                                                                                                                              
        169 Bloom                          12100            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        172 Bates                           8833           999                                                                                                                                                                                                                                              
        173 Kumar                           7381            80                                                                                                                                                                                                                                              
        174 Abel                           13310            80                                                                                                                                                                                                                                              
        175 Hutton                         10648            80                                                                                                                                                                                                                                              
        176 Taylor                      12591.26            80                                                                                                                                                                                                                                              
        177 Livingston                     10164            80                                                                                                                                                                                                                                              
        178 Grant                           8470                                                                                                                                                                                                                                                            
        179 Johnson                         7502            80                                                                                                                                                                                                                                              
        180 Taylor                          3872            50                                                                                                                                                                                                                                              
        181 Fleaur                          3751            50                                                                                                                                                                                                                                              
        182 Sullivan                        3025            50                                                                                                                                                                                                                                              
        183 Geoni                           3388            50                                                                                                                                                                                                                                              
        184 Sarchand                        5082            50                                                                                                                                                                                                                                              
        185 Bull                            4961            50                                                                                                                                                                                                                                              
        186 Dellinger                       4114            50                                                                                                                                                                                                                                              
        187 Cabrio                          3630            50                                                                                                                                                                                                                                              
        188 Chung                           4598            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        189 Dilly                           4356            50                                                                                                                                                                                                                                              
        190 Gates                           3509            50                                                                                                                                                                                                                                              
        191 Perkins                         3025            50                                                                                                                                                                                                                                              
        192 Bell                            4840            50                                                                                                                                                                                                                                              
        193 Everett                         4719            50                                                                                                                                                                                                                                              
        194 McCain                          3872            50                                                                                                                                                                                                                                              
        195 Jones                           3388            50                                                                                                                                                                                                                                              
        196 Walsh                           3751            50                                                                                                                                                                                                                                              
        197 Feeney                          3630            50                                                                                                                                                                                                                                              

111 rows selected.

SQL> desc new_depts;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 DEPARTMENT_ID                                                                                                                                                                          NUMBER(4)
 DEPARTMENT_NAME                                                                                                                                                               NOT NULL VARCHAR2(30)
 DEPT_SAL                                                                                                                                                                               NUMBER

SQL> select * from new_depts;

DEPARTMENT_ID DEPARTMENT_NAME                  DEPT_SAL                                                                                                                                                                                                                                                     
------------- ------------------------------ ----------                                                                                                                                                                                                                                                     
          100 Finance                          66582.55                                                                                                                                                                                                                                                     
           50 Shipping                           211562                                                                                                                                                                                                                                                     
           70 Public Relations                    12100                                                                                                                                                                                                                                                     
          999 Dept 999                             8833                                                                                                                                                                                                                                                     
           90 Executive                         7503.51                                                                                                                                                                                                                                                     
           30 Purchasing                          30129                                                                                                                                                                                                                                                     
           10 Administration                       5324                                                                                                                                                                                                                                                     
          110 Accounting                       24572.68                                                                                                                                                                                                                                                     
           40 Human Resources                      7865                                                                                                                                                                                                                                                     
           20 Marketing                           22990                                                                                                                                                                                                                                                     
           60 IT                               38170.38                                                                                                                                                                                                                                                     
           80 Sales                           341227.26                                                                                                                                                                                                                                                     

12 rows selected.

SQL> desc emp_details;
 Name                                                                                                                                                                          Null?    Type
 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------- --------------------------------------------------------------------------------------------------------------------
 EMPLOYEE_ID                                                                                                                                                                   NOT NULL NUMBER(6)
 LAST_NAME                                                                                                                                                                     NOT NULL VARCHAR2(25)
 SALARY                                                                                                                                                                                 NUMBER(8,2)
 DEPARTMENT_ID                                                                                                                                                                          NUMBER(4)
 DEPARTMENT_NAME                                                                                                                                                               NOT NULL VARCHAR2(30)

SQL> select * from emp_details;

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        198 OConnell                     3806.66            50 Shipping                                                                                                                                                                                                                                     
        199 Grant                        3806.66            50 Shipping                                                                                                                                                                                                                                     
        200 Whalen                       6764.14            10 Administration                                                                                                                                                                                                                               
        201 Hartstein                       6050            20 Marketing                                                                                                                                                                                                                                    
        202 Fay                           8784.6            20 Marketing                                                                                                                                                                                                                                    
        203 Mavris                       9516.65            40 Human Resources                                                                                                                                                                                                                              
        204 Baer                           14641            70 Public Relations                                                                                                                                                                                                                             
        205 Higgins                     17580.92           110 Accounting                                                                                                                                                                                                                                   
        206 Gietz                       12152.03           110 Accounting                                                                                                                                                                                                                                   
        300 Smith                         5989.5            60 IT                                                                                                                                                                                                                                           
       1000 b                             6258.5            50 Shipping                                                                                                                                                                                                                                     
       1001 b                               7986            50 Shipping                                                                                                                                                                                                                                     
       3000 Smith                           5445            60 IT                                                                                                                                                                                                                                           
       1200 Russell                        14520            50 Shipping                                                                                                                                                                                                                                     
        100 King                         65362.2            90 Executive                                                                                                                                                                                                                                    
        101 Kochhar                      14526.8            90 Executive                                                                                                                                                                                                                                    
        102 De Haan                      34784.6            90 Executive                                                                                                                                                                                                                                    

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        103 Hunold                       13176.9            60 IT                                                                                                                                                                                                                                           
        104 Ernst                          15072            60 IT                                                                                                                                                                                                                                           
        105 Austin                       7027.68            60 IT                                                                                                                                                                                                                                           
        106 Pataballa                    7027.68            60 IT                                                                                                                                                                                                                                           
        107 Lorentz                        10890            60 IT                                                                                                                                                                                                                                           
        108 Greenberg                   21272.91           100 Finance                                                                                                                                                                                                                                      
        109 Faviet                       13176.9           100 Finance                                                                                                                                                                                                                                      
        110 Chen                        16778.45           100 Finance                                                                                                                                                                                                                                      
        111 Sciarra                     11273.57           100 Finance                                                                                                                                                                                                                                      
        112 Urman                       11419.98           100 Finance                                                                                                                                                                                                                                      
        113 Popp                        10102.29           100 Finance                                                                                                                                                                                                                                      
        114 Raphaely                     16105.1            30 Purchasing                                                                                                                                                                                                                                   
        115 Khoo                         4538.71            30 Purchasing                                                                                                                                                                                                                                   
        116 Baida                        4245.89            30 Purchasing                                                                                                                                                                                                                                   
        117 Tobias                       4099.48            30 Purchasing                                                                                                                                                                                                                                   
        118 Himuro                       3806.66            30 Purchasing                                                                                                                                                                                                                                   
        119 Colmenares                   3660.25            30 Purchasing                                                                                                                                                                                                                                   

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        120 Weiss                        11712.8            50 Shipping                                                                                                                                                                                                                                     
        121 Fripp                       12005.62            50 Shipping                                                                                                                                                                                                                                     
        122 Kaufling                    11566.39            50 Shipping                                                                                                                                                                                                                                     
        123 Vollman                      9516.65            50 Shipping                                                                                                                                                                                                                                     
        124 Mourgos                      8491.78            50 Shipping                                                                                                                                                                                                                                     
        125 Nayer                        6285.12            50 Shipping                                                                                                                                                                                                                                     
        126 Mikkilineni                  5553.07            50 Shipping                                                                                                                                                                                                                                     
        127 Landry                       5113.84            50 Shipping                                                                                                                                                                                                                                     
        128 Markle                       4821.02            50 Shipping                                                                                                                                                                                                                                     
        129 Bissot                       6431.53            50 Shipping                                                                                                                                                                                                                                     
        130 Atkinson                     5699.48            50 Shipping                                                                                                                                                                                                                                     
        131 Marlow                       5260.25            50 Shipping                                                                                                                                                                                                                                     
        132 Olson                        4674.61            50 Shipping                                                                                                                                                                                                                                     
        133 Mallin                       6431.53            50 Shipping                                                                                                                                                                                                                                     
        134 Rogers                       5845.89            50 Shipping                                                                                                                                                                                                                                     
        135 Gee                          5113.84            50 Shipping                                                                                                                                                                                                                                     
        136 Philtanker                   4821.02            50 Shipping                                                                                                                                                                                                                                     

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        137 Ladwig                       6870.76            50 Shipping                                                                                                                                                                                                                                     
        138 Stiles                          5714            50 Shipping                                                                                                                                                                                                                                     
        139 Seo                          5553.07            50 Shipping                                                                                                                                                                                                                                     
        140 Patel                        5260.25            50 Shipping                                                                                                                                                                                                                                     
        141 Rajs                         6724.35            50 Shipping                                                                                                                                                                                                                                     
        142 Davies                       6138.71            50 Shipping                                                                                                                                                                                                                                     
        143 Matos                        5406.66            50 Shipping                                                                                                                                                                                                                                     
        144 Vargas                       5260.25            50 Shipping                                                                                                                                                                                                                                     
        145 Russell                      20497.4            80 Sales                                                                                                                                                                                                                                        
        146 Partners                    19765.35            80 Sales                                                                                                                                                                                                                                        
        147 Errazuriz                    17569.2            80 Sales                                                                                                                                                                                                                                        
        148 Cambrault                    16105.1            80 Sales                                                                                                                                                                                                                                        
        149 Zlotkey                     15373.05            80 Sales                                                                                                                                                                                                                                        
        150 Tucker                         14641            80 Sales                                                                                                                                                                                                                                        
        151 Bernstein                   13908.95            80 Sales                                                                                                                                                                                                                                        
        152 Hall                         13176.9            80 Sales                                                                                                                                                                                                                                        
        153 Olsen                        11712.8            80 Sales                                                                                                                                                                                                                                        

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        154 Cambrault                   10980.75            80 Sales                                                                                                                                                                                                                                        
        155 Tuvault                      10248.7            80 Sales                                                                                                                                                                                                                                        
        156 King                           14641            80 Sales                                                                                                                                                                                                                                        
        157 Sully                       13908.95            80 Sales                                                                                                                                                                                                                                        
        158 McEwen                       13176.9            80 Sales                                                                                                                                                                                                                                        
        159 Smith                        11712.8            80 Sales                                                                                                                                                                                                                                        
        160 Doran                       10980.75            80 Sales                                                                                                                                                                                                                                        
        161 Sewall                       10248.7            80 Sales                                                                                                                                                                                                                                        
        162 Vishney                     15373.05            80 Sales                                                                                                                                                                                                                                        
        163 Greene                      13908.95            80 Sales                                                                                                                                                                                                                                        
        164 Marvins                     10541.52            80 Sales                                                                                                                                                                                                                                        
        165 Lee                          9955.88            80 Sales                                                                                                                                                                                                                                        
        166 Ande                         9370.24            80 Sales                                                                                                                                                                                                                                        
        167 Banda                        9077.42            80 Sales                                                                                                                                                                                                                                        
        168 Ozer                        16837.15            80 Sales                                                                                                                                                                                                                                        
        169 Bloom                          14641            80 Sales                                                                                                                                                                                                                                        
       1300 Smith                           4500            60 IT                                                                                                                                                                                                                                           

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        173 Kumar                        8931.01            80 Sales                                                                                                                                                                                                                                        
        174 Abel                         16105.1            80 Sales                                                                                                                                                                                                                                        
        175 Hutton                      12884.08            80 Sales                                                                                                                                                                                                                                        
        176 Taylor                      15235.43            80 Sales                                                                                                                                                                                                                                        
        177 Livingston                  12298.44            80 Sales                                                                                                                                                                                                                                        
        179 Johnson                      9077.42            80 Sales                                                                                                                                                                                                                                        
        180 Taylor                       4685.12           999 Dept 999                                                                                                                                                                                                                                     
        181 Fleaur                       4538.71            50 Shipping                                                                                                                                                                                                                                     
        182 Sullivan                     3660.25            50 Shipping                                                                                                                                                                                                                                     
        183 Geoni                        4099.48            50 Shipping                                                                                                                                                                                                                                     
        184 Sarchand                     6149.22            50 Shipping                                                                                                                                                                                                                                     
        185 Bull                         6002.81            50 Shipping                                                                                                                                                                                                                                     
        186 Dellinger                    4977.94            50 Shipping                                                                                                                                                                                                                                     
        187 Cabrio                        4392.3            50 Shipping                                                                                                                                                                                                                                     
        188 Chung                        5563.58            50 Shipping                                                                                                                                                                                                                                     
        189 Dilly                        5270.76            50 Shipping                                                                                                                                                                                                                                     
        190 Gates                        4245.89            50 Shipping                                                                                                                                                                                                                                     

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID DEPARTMENT_NAME                                                                                                                                                                                                                              
----------- ------------------------- ---------- ------------- ------------------------------                                                                                                                                                                                                               
        191 Perkins                      3660.25            50 Shipping                                                                                                                                                                                                                                     
        192 Bell                          5856.4            50 Shipping                                                                                                                                                                                                                                     
        193 Everett                      5709.99            50 Shipping                                                                                                                                                                                                                                     
        194 McCain                       4685.12            50 Shipping                                                                                                                                                                                                                                     
        195 Jones                        4099.48            50 Shipping                                                                                                                                                                                                                                     
        196 Walsh                        4538.71            50 Shipping                                                                                                                                                                                                                                     
        197 Feeney                        4392.3            50 Shipping                                                                                                                                                                                                                                     

109 rows selected.

SQL> CREATE OR REPLACE TRIGGER new_emp_dept
  2  INSTEAD OF INSERT OR UPDATE OR DELETE ON emp_details
  3  FOR EACH ROW
  4  BEGIN
  5    IF INSERTING THEN
  6      INSERT INTO new_emps
  7      VALUES (:NEW.employee_id, :NEW.last_name, :NEW.salary, 	        :NEW.department_id);
  8      UPDATE new_depts
  9        SET dept_sal = dept_sal + :NEW.salary
 10        WHERE department_id = :NEW.department_id;
 11    ELSIF DELETING THEN
 12      DELETE FROM new_emps
 13        WHERE employee_id = :OLD.employee_id;
 14      UPDATE new_depts
 15        SET dept_sal = dept_sal - :OLD.salary
 16        WHERE department_id = :OLD.department_id;
 17    ELSIF UPDATING ('salary') THEN
 18      UPDATE new_emps
 19        SET salary = :NEW.salary
 20        WHERE employee_id = :OLD.employee_id;
 21      UPDATE new_depts
 22        SET dept_sal = dept_sal + (:NEW.salary - :OLD.salary)
 23        WHERE department_id = :OLD.department_id;
 24    ELSIF UPDATING ('department_id') THEN
 25      UPDATE new_emps
 26        SET department_id = :NEW.department_id
 27        WHERE employee_id = :OLD.employee_id;
 28      UPDATE new_depts
 29        SET dept_sal = dept_sal - :OLD.salary
 30        WHERE department_id = :OLD.department_id;
 31      UPDATE new_depts
 32        SET dept_sal = dept_sal + :NEW.salary
 33        WHERE department_id = :NEW.department_id;
 34    END IF;
 35  END;
 36  /

Trigger created.

SQL> 
SQL> INSERT INTO emp_details
  2  VALUES (9001,'ABBOTT',3000, 10, 'Administration');

1 row created.

SQL> select * from new_emps;

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        198 OConnell                        3146            50                                                                                                                                                                                                                                              
        199 Grant                           3146            50                                                                                                                                                                                                                                              
        200 Whalen                          5324            10                                                                                                                                                                                                                                              
        201 Hartstein                      15730            20                                                                                                                                                                                                                                              
        202 Fay                             7260            20                                                                                                                                                                                                                                              
        203 Mavris                          7865            40                                                                                                                                                                                                                                              
        204 Baer                           12100            70                                                                                                                                                                                                                                              
        205 Higgins                     14529.68           110                                                                                                                                                                                                                                              
        206 Gietz                          10043           110                                                                                                                                                                                                                                              
        300 Smith                           4950            60                                                                                                                                                                                                                                              
       1000 b                               3850            50                                                                                                                                                                                                                                              
       1001 b                               6600            50                                                                                                                                                                                                                                              
       3000 Smith                           4500            60                                                                                                                                                                                                                                              
       1200 Russell                        12000            50                                                                                                                                                                                                                                              
        999 Smith                           7000                                                                                                                                                                                                                                                            
        100 King                         3689.53            90                                                                                                                                                                                                                                              
        101 Kochhar                      1200.56            90                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        102 De Haan                      2613.42            90                                                                                                                                                                                                                                              
        103 Hunold                         10890            60                                                                                                                                                                                                                                              
        104 Ernst                        1132.38            60                                                                                                                                                                                                                                              
        105 Austin                          5808            60                                                                                                                                                                                                                                              
        106 Pataballa                       5808            60                                                                                                                                                                                                                                              
        107 Lorentz                         5082            60                                                                                                                                                                                                                                              
        108 Greenberg                   15982.65           100                                                                                                                                                                                                                                              
        109 Faviet                         10890           100                                                                                                                                                                                                                                              
        110 Chen                         12605.9           100                                                                                                                                                                                                                                              
        111 Sciarra                         9317           100                                                                                                                                                                                                                                              
        112 Urman                           9438           100                                                                                                                                                                                                                                              
        113 Popp                            8349           100                                                                                                                                                                                                                                              
        114 Raphaely                       13310            30                                                                                                                                                                                                                                              
        115 Khoo                            3751            30                                                                                                                                                                                                                                              
        116 Baida                           3509            30                                                                                                                                                                                                                                              
        117 Tobias                          3388            30                                                                                                                                                                                                                                              
        118 Himuro                          3146            30                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        119 Colmenares                      3025            30                                                                                                                                                                                                                                              
        120 Weiss                           9680            50                                                                                                                                                                                                                                              
        121 Fripp                           9922            50                                                                                                                                                                                                                                              
        122 Kaufling                        9559            50                                                                                                                                                                                                                                              
        123 Vollman                         7865            50                                                                                                                                                                                                                                              
        124 Mourgos                         7018            50                                                                                                                                                                                                                                              
        125 Nayer                           3872            50                                                                                                                                                                                                                                              
        126 Mikkilineni                     3267            50                                                                                                                                                                                                                                              
        127 Landry                          2904            50                                                                                                                                                                                                                                              
        128 Markle                          2662            50                                                                                                                                                                                                                                              
        129 Bissot                          3993            50                                                                                                                                                                                                                                              
        130 Atkinson                        3388            50                                                                                                                                                                                                                                              
        131 Marlow                          3025            50                                                                                                                                                                                                                                              
        132 Olson                           2541            50                                                                                                                                                                                                                                              
        133 Mallin                          3993            50                                                                                                                                                                                                                                              
        134 Rogers                          3509            50                                                                                                                                                                                                                                              
        135 Gee                             2904            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        136 Philtanker                      2662            50                                                                                                                                                                                                                                              
        137 Ladwig                          4356            50                                                                                                                                                                                                                                              
        138 Stiles                          3740            50                                                                                                                                                                                                                                              
        139 Seo                             3267            50                                                                                                                                                                                                                                              
        140 Patel                           3025            50                                                                                                                                                                                                                                              
        141 Rajs                            4235            50                                                                                                                                                                                                                                              
        142 Davies                          3751            50                                                                                                                                                                                                                                              
        143 Matos                           3146            50                                                                                                                                                                                                                                              
        144 Vargas                          3025            50                                                                                                                                                                                                                                              
        145 Russell                        16940            80                                                                                                                                                                                                                                              
        146 Partners                       16335            80                                                                                                                                                                                                                                              
        147 Errazuriz                      14520            80                                                                                                                                                                                                                                              
        148 Cambrault                      13310            80                                                                                                                                                                                                                                              
        149 Zlotkey                        12705            80                                                                                                                                                                                                                                              
        150 Tucker                         12100            80                                                                                                                                                                                                                                              
        151 Bernstein                      11495            80                                                                                                                                                                                                                                              
        152 Hall                           10890            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        153 Olsen                           9680            80                                                                                                                                                                                                                                              
        154 Cambrault                       9075            80                                                                                                                                                                                                                                              
        155 Tuvault                         8470            80                                                                                                                                                                                                                                              
        156 King                           12100            80                                                                                                                                                                                                                                              
        157 Sully                          11495            80                                                                                                                                                                                                                                              
        158 McEwen                         10890            80                                                                                                                                                                                                                                              
        159 Smith                           9680            80                                                                                                                                                                                                                                              
        160 Doran                           9075            80                                                                                                                                                                                                                                              
        161 Sewall                          8470            80                                                                                                                                                                                                                                              
        162 Vishney                        12705            80                                                                                                                                                                                                                                              
        163 Greene                         11495            80                                                                                                                                                                                                                                              
        164 Marvins                         8712            80                                                                                                                                                                                                                                              
        165 Lee                             8228            80                                                                                                                                                                                                                                              
        166 Ande                            7744            80                                                                                                                                                                                                                                              
        167 Banda                           7502            80                                                                                                                                                                                                                                              
        168 Ozer                           13915            80                                                                                                                                                                                                                                              
        169 Bloom                          12100            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        172 Bates                           8833           999                                                                                                                                                                                                                                              
        173 Kumar                           7381            80                                                                                                                                                                                                                                              
        174 Abel                           13310            80                                                                                                                                                                                                                                              
        175 Hutton                         10648            80                                                                                                                                                                                                                                              
        176 Taylor                      12591.26            80                                                                                                                                                                                                                                              
        177 Livingston                     10164            80                                                                                                                                                                                                                                              
        178 Grant                           8470                                                                                                                                                                                                                                                            
        179 Johnson                         7502            80                                                                                                                                                                                                                                              
        180 Taylor                          3872            50                                                                                                                                                                                                                                              
SQL> set lines 300
SQL> set pages 20
SQL> set serveroutput on
SQL> select instance from v$thread;

INSTANCE                                                                                                                                                                                                                                                                                                    
--------------------------------------------------------------------------------                                                                                                                                                                                                                            
orcl                                                                                                                                                                                                                                                                                                        

SQL> select name from v$database;

NAME                                                                                                                                                                                                                                                                                                        
---------                                                                                                                                                                                                                                                                                                   
ORCL                                                                                                                                                                                                                                                                                                        

SQL> select * from new_emps;

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        198 OConnell                        3146            50                                                                                                                                                                                                                                              
        199 Grant                           3146            50                                                                                                                                                                                                                                              
        200 Whalen                          5324            10                                                                                                                                                                                                                                              
        201 Hartstein                      15730            20                                                                                                                                                                                                                                              
        202 Fay                             7260            20                                                                                                                                                                                                                                              
        203 Mavris                          7865            40                                                                                                                                                                                                                                              
        204 Baer                           12100            70                                                                                                                                                                                                                                              
        205 Higgins                     14529.68           110                                                                                                                                                                                                                                              
        206 Gietz                          10043           110                                                                                                                                                                                                                                              
        300 Smith                           4950            60                                                                                                                                                                                                                                              
       1000 b                               3850            50                                                                                                                                                                                                                                              
       1001 b                               6600            50                                                                                                                                                                                                                                              
       3000 Smith                           4500            60                                                                                                                                                                                                                                              
       1200 Russell                        12000            50                                                                                                                                                                                                                                              
        999 Smith                           7000                                                                                                                                                                                                                                                            
        100 King                         3689.53            90                                                                                                                                                                                                                                              
        101 Kochhar                      1200.56            90                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        102 De Haan                      2613.42            90                                                                                                                                                                                                                                              
        103 Hunold                         10890            60                                                                                                                                                                                                                                              
        104 Ernst                        1132.38            60                                                                                                                                                                                                                                              
        105 Austin                          5808            60                                                                                                                                                                                                                                              
        106 Pataballa                       5808            60                                                                                                                                                                                                                                              
        107 Lorentz                         5082            60                                                                                                                                                                                                                                              
        108 Greenberg                   15982.65           100                                                                                                                                                                                                                                              
        109 Faviet                         10890           100                                                                                                                                                                                                                                              
        110 Chen                         12605.9           100                                                                                                                                                                                                                                              
        111 Sciarra                         9317           100                                                                                                                                                                                                                                              
        112 Urman                           9438           100                                                                                                                                                                                                                                              
        113 Popp                            8349           100                                                                                                                                                                                                                                              
        114 Raphaely                       13310            30                                                                                                                                                                                                                                              
        115 Khoo                            3751            30                                                                                                                                                                                                                                              
        116 Baida                           3509            30                                                                                                                                                                                                                                              
        117 Tobias                          3388            30                                                                                                                                                                                                                                              
        118 Himuro                          3146            30                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        119 Colmenares                      3025            30                                                                                                                                                                                                                                              
        120 Weiss                           9680            50                                                                                                                                                                                                                                              
        121 Fripp                           9922            50                                                                                                                                                                                                                                              
        122 Kaufling                        9559            50                                                                                                                                                                                                                                              
        123 Vollman                         7865            50                                                                                                                                                                                                                                              
        124 Mourgos                         7018            50                                                                                                                                                                                                                                              
        125 Nayer                           3872            50                                                                                                                                                                                                                                              
        126 Mikkilineni                     3267            50                                                                                                                                                                                                                                              
        127 Landry                          2904            50                                                                                                                                                                                                                                              
        128 Markle                          2662            50                                                                                                                                                                                                                                              
        129 Bissot                          3993            50                                                                                                                                                                                                                                              
        130 Atkinson                        3388            50                                                                                                                                                                                                                                              
        131 Marlow                          3025            50                                                                                                                                                                                                                                              
        132 Olson                           2541            50                                                                                                                                                                                                                                              
        133 Mallin                          3993            50                                                                                                                                                                                                                                              
        134 Rogers                          3509            50                                                                                                                                                                                                                                              
        135 Gee                             2904            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        136 Philtanker                      2662            50                                                                                                                                                                                                                                              
        137 Ladwig                          4356            50                                                                                                                                                                                                                                              
        138 Stiles                          3740            50                                                                                                                                                                                                                                              
        139 Seo                             3267            50                                                                                                                                                                                                                                              
        140 Patel                           3025            50                                                                                                                                                                                                                                              
        141 Rajs                            4235            50                                                                                                                                                                                                                                              
        142 Davies                          3751            50                                                                                                                                                                                                                                              
        143 Matos                           3146            50                                                                                                                                                                                                                                              
        144 Vargas                          3025            50                                                                                                                                                                                                                                              
        145 Russell                        16940            80                                                                                                                                                                                                                                              
        146 Partners                       16335            80                                                                                                                                                                                                                                              
        147 Errazuriz                      14520            80                                                                                                                                                                                                                                              
        148 Cambrault                      13310            80                                                                                                                                                                                                                                              
        149 Zlotkey                        12705            80                                                                                                                                                                                                                                              
        150 Tucker                         12100            80                                                                                                                                                                                                                                              
        151 Bernstein                      11495            80                                                                                                                                                                                                                                              
        152 Hall                           10890            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        153 Olsen                           9680            80                                                                                                                                                                                                                                              
        154 Cambrault                       9075            80                                                                                                                                                                                                                                              
        155 Tuvault                         8470            80                                                                                                                                                                                                                                              
        156 King                           12100            80                                                                                                                                                                                                                                              
        157 Sully                          11495            80                                                                                                                                                                                                                                              
        158 McEwen                         10890            80                                                                                                                                                                                                                                              
        159 Smith                           9680            80                                                                                                                                                                                                                                              
        160 Doran                           9075            80                                                                                                                                                                                                                                              
        161 Sewall                          8470            80                                                                                                                                                                                                                                              
        162 Vishney                        12705            80                                                                                                                                                                                                                                              
        163 Greene                         11495            80                                                                                                                                                                                                                                              
        164 Marvins                         8712            80                                                                                                                                                                                                                                              
        165 Lee                             8228            80                                                                                                                                                                                                                                              
        166 Ande                            7744            80                                                                                                                                                                                                                                              
        167 Banda                           7502            80                                                                                                                                                                                                                                              
        168 Ozer                           13915            80                                                                                                                                                                                                                                              
        169 Bloom                          12100            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        172 Bates                           8833           999                                                                                                                                                                                                                                              
        173 Kumar                           7381            80                                                                                                                                                                                                                                              
        174 Abel                           13310            80                                                                                                                                                                                                                                              
        175 Hutton                         10648            80                                                                                                                                                                                                                                              
        176 Taylor                      12591.26            80                                                                                                                                                                                                                                              
        177 Livingston                     10164            80                                                                                                                                                                                                                                              
        178 Grant                           8470                                                                                                                                                                                                                                                            
        179 Johnson                         7502            80                                                                                                                                                                                                                                              
        180 Taylor                          3872            50                                                                                                                                                                                                                                              
        181 Fleaur                          3751            50                                                                                                                                                                                                                                              
        182 Sullivan                        3025            50                                                                                                                                                                                                                                              
        183 Geoni                           3388            50                                                                                                                                                                                                                                              
        184 Sarchand                        5082            50                                                                                                                                                                                                                                              
        185 Bull                            4961            50                                                                                                                                                                                                                                              
        186 Dellinger                       4114            50                                                                                                                                                                                                                                              
        187 Cabrio                          3630            50                                                                                                                                                                                                                                              
        188 Chung                           4598            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        189 Dilly                           4356            50                                                                                                                                                                                                                                              
        190 Gates                           3509            50                                                                                                                                                                                                                                              
        191 Perkins                         3025            50                                                                                                                                                                                                                                              
        192 Bell                            4840            50                                                                                                                                                                                                                                              
        193 Everett                         4719            50                                                                                                                                                                                                                                              
        194 McCain                          3872            50                                                                                                                                                                                                                                              
        195 Jones                           3388            50                                                                                                                                                                                                                                              
        196 Walsh                           3751            50                                                                                                                                                                                                                                              
        197 Feeney                          3630            50                                                                                                                                                                                                                                              

111 rows selected.

SQL> delete from emp_details where employee_id=197;

1 row deleted.

SQL> select * from new_emps;

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        198 OConnell                        3146            50                                                                                                                                                                                                                                              
        199 Grant                           3146            50                                                                                                                                                                                                                                              
        200 Whalen                          5324            10                                                                                                                                                                                                                                              
        201 Hartstein                      15730            20                                                                                                                                                                                                                                              
        202 Fay                             7260            20                                                                                                                                                                                                                                              
        203 Mavris                          7865            40                                                                                                                                                                                                                                              
        204 Baer                           12100            70                                                                                                                                                                                                                                              
        205 Higgins                     14529.68           110                                                                                                                                                                                                                                              
        206 Gietz                          10043           110                                                                                                                                                                                                                                              
        300 Smith                           4950            60                                                                                                                                                                                                                                              
       1000 b                               3850            50                                                                                                                                                                                                                                              
       1001 b                               6600            50                                                                                                                                                                                                                                              
       3000 Smith                           4500            60                                                                                                                                                                                                                                              
       1200 Russell                        12000            50                                                                                                                                                                                                                                              
        999 Smith                           7000                                                                                                                                                                                                                                                            
        100 King                         3689.53            90                                                                                                                                                                                                                                              
        101 Kochhar                      1200.56            90                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        102 De Haan                      2613.42            90                                                                                                                                                                                                                                              
        103 Hunold                         10890            60                                                                                                                                                                                                                                              
        104 Ernst                        1132.38            60                                                                                                                                                                                                                                              
        105 Austin                          5808            60                                                                                                                                                                                                                                              
        106 Pataballa                       5808            60                                                                                                                                                                                                                                              
        107 Lorentz                         5082            60                                                                                                                                                                                                                                              
        108 Greenberg                   15982.65           100                                                                                                                                                                                                                                              
        109 Faviet                         10890           100                                                                                                                                                                                                                                              
        110 Chen                         12605.9           100                                                                                                                                                                                                                                              
        111 Sciarra                         9317           100                                                                                                                                                                                                                                              
        112 Urman                           9438           100                                                                                                                                                                                                                                              
        113 Popp                            8349           100                                                                                                                                                                                                                                              
        114 Raphaely                       13310            30                                                                                                                                                                                                                                              
        115 Khoo                            3751            30                                                                                                                                                                                                                                              
        116 Baida                           3509            30                                                                                                                                                                                                                                              
        117 Tobias                          3388            30                                                                                                                                                                                                                                              
        118 Himuro                          3146            30                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        119 Colmenares                      3025            30                                                                                                                                                                                                                                              
        120 Weiss                           9680            50                                                                                                                                                                                                                                              
        121 Fripp                           9922            50                                                                                                                                                                                                                                              
        122 Kaufling                        9559            50                                                                                                                                                                                                                                              
        123 Vollman                         7865            50                                                                                                                                                                                                                                              
        124 Mourgos                         7018            50                                                                                                                                                                                                                                              
        125 Nayer                           3872            50                                                                                                                                                                                                                                              
        126 Mikkilineni                     3267            50                                                                                                                                                                                                                                              
        127 Landry                          2904            50                                                                                                                                                                                                                                              
        128 Markle                          2662            50                                                                                                                                                                                                                                              
        129 Bissot                          3993            50                                                                                                                                                                                                                                              
        130 Atkinson                        3388            50                                                                                                                                                                                                                                              
        131 Marlow                          3025            50                                                                                                                                                                                                                                              
        132 Olson                           2541            50                                                                                                                                                                                                                                              
        133 Mallin                          3993            50                                                                                                                                                                                                                                              
        134 Rogers                          3509            50                                                                                                                                                                                                                                              
        135 Gee                             2904            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        136 Philtanker                      2662            50                                                                                                                                                                                                                                              
        137 Ladwig                          4356            50                                                                                                                                                                                                                                              
        138 Stiles                          3740            50                                                                                                                                                                                                                                              
        139 Seo                             3267            50                                                                                                                                                                                                                                              
        140 Patel                           3025            50                                                                                                                                                                                                                                              
        141 Rajs                            4235            50                                                                                                                                                                                                                                              
        142 Davies                          3751            50                                                                                                                                                                                                                                              
        143 Matos                           3146            50                                                                                                                                                                                                                                              
        144 Vargas                          3025            50                                                                                                                                                                                                                                              
        145 Russell                        16940            80                                                                                                                                                                                                                                              
        146 Partners                       16335            80                                                                                                                                                                                                                                              
        147 Errazuriz                      14520            80                                                                                                                                                                                                                                              
        148 Cambrault                      13310            80                                                                                                                                                                                                                                              
        149 Zlotkey                        12705            80                                                                                                                                                                                                                                              
        150 Tucker                         12100            80                                                                                                                                                                                                                                              
        151 Bernstein                      11495            80                                                                                                                                                                                                                                              
        152 Hall                           10890            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        153 Olsen                           9680            80                                                                                                                                                                                                                                              
        154 Cambrault                       9075            80                                                                                                                                                                                                                                              
        155 Tuvault                         8470            80                                                                                                                                                                                                                                              
        156 King                           12100            80                                                                                                                                                                                                                                              
        157 Sully                          11495            80                                                                                                                                                                                                                                              
        158 McEwen                         10890            80                                                                                                                                                                                                                                              
        159 Smith                           9680            80                                                                                                                                                                                                                                              
        160 Doran                           9075            80                                                                                                                                                                                                                                              
        161 Sewall                          8470            80                                                                                                                                                                                                                                              
        162 Vishney                        12705            80                                                                                                                                                                                                                                              
        163 Greene                         11495            80                                                                                                                                                                                                                                              
        164 Marvins                         8712            80                                                                                                                                                                                                                                              
        165 Lee                             8228            80                                                                                                                                                                                                                                              
        166 Ande                            7744            80                                                                                                                                                                                                                                              
        167 Banda                           7502            80                                                                                                                                                                                                                                              
        168 Ozer                           13915            80                                                                                                                                                                                                                                              
        169 Bloom                          12100            80                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        172 Bates                           8833           999                                                                                                                                                                                                                                              
        173 Kumar                           7381            80                                                                                                                                                                                                                                              
        174 Abel                           13310            80                                                                                                                                                                                                                                              
        175 Hutton                         10648            80                                                                                                                                                                                                                                              
        176 Taylor                      12591.26            80                                                                                                                                                                                                                                              
        177 Livingston                     10164            80                                                                                                                                                                                                                                              
        178 Grant                           8470                                                                                                                                                                                                                                                            
        179 Johnson                         7502            80                                                                                                                                                                                                                                              
        180 Taylor                          3872            50                                                                                                                                                                                                                                              
        181 Fleaur                          3751            50                                                                                                                                                                                                                                              
        182 Sullivan                        3025            50                                                                                                                                                                                                                                              
        183 Geoni                           3388            50                                                                                                                                                                                                                                              
        184 Sarchand                        5082            50                                                                                                                                                                                                                                              
        185 Bull                            4961            50                                                                                                                                                                                                                                              
        186 Dellinger                       4114            50                                                                                                                                                                                                                                              
        187 Cabrio                          3630            50                                                                                                                                                                                                                                              
        188 Chung                           4598            50                                                                                                                                                                                                                                              

EMPLOYEE_ID LAST_NAME                     SALARY DEPARTMENT_ID                                                                                                                                                                                                                                              
----------- ------------------------- ---------- -------------                                                                                                                                                                                                                                              
        189 Dilly                           4356            50                                                                                                                                                                                                                                              
        190 Gates                           3509            50                                                                                                                                                                                                                                              
        191 Perkins                         3025            50                                                                                                                                                                                                                                              
        192 Bell                            4840            50                                                                                                                                                                                                                                              
        193 Everett                         4719            50                                                                                                                                                                                                                                              
        194 McCain                          3872            50                                                                                                                                                                                                                                              
        195 Jones                           3388            50                                                                                                                                                                                                                                              
        196 Walsh                           3751            50                                                                                                                                                                                                                                              

110 rows selected.

SQL> select * from new_depts;

DEPARTMENT_ID DEPARTMENT_NAME                  DEPT_SAL                                                                                                                                                                                                                                                     
------------- ------------------------------ ----------                                                                                                                                                                                                                                                     
          100 Finance                          66582.55                                                                                                                                                                                                                                                     
           50 Shipping                         207169.7                                                                                                                                                                                                                                                     
           70 Public Relations                    12100                                                                                                                                                                                                                                                     
          999 Dept 999                             8833                                                                                                                                                                                                                                                     
           90 Executive                         7503.51                                                                                                                                                                                                                                                     
           30 Purchasing                          30129                                                                                                                                                                                                                                                     
           10 Administration                       5324                                                                                                                                                                                                                                                     
          110 Accounting                       24572.68                                                                                                                                                                                                                                                     
           40 Human Resources                      7865                                                                                                                                                                                                                                                     
           20 Marketing                           22990                                                                                                                                                                                                                                                     
           60 IT                               38170.38                                                                                                                                                                                                                                                     
           80 Sales                           341227.26                                                                                                                                                                                                                                                     

12 rows selected.

SQL> rollback;

Rollback complete.

SQL> select * from new_depts;

DEPARTMENT_ID DEPARTMENT_NAME                  DEPT_SAL                                                                                                                                                                                                                                                     
------------- ------------------------------ ----------                                                                                                                                                                                                                                                     
          100 Finance                          66582.55                                                                                                                                                                                                                                                     
           50 Shipping                           211562                                                                                                                                                                                                                                                     
           70 Public Relations                    12100                                                                                                                                                                                                                                                     
          999 Dept 999                             8833                                                                                                                                                                                                                                                     
           90 Executive                         7503.51                                                                                                                                                                                                                                                     
           30 Purchasing                          30129                                                                                                                                                                                                                                                     
           10 Administration                       5324                                                                                                                                                                                                                                                     
          110 Accounting                       24572.68                                                                                                                                                                                                                                                     
           40 Human Resources                      7865                                                                                                                                                                                                                                                     
           20 Marketing                           22990                                                                                                                                                                                                                                                     
           60 IT                               38170.38                                                                                                                                                                                                                                                     
           80 Sales                           341227.26                                                                                                                                                                                                                                                     

12 rows selected.

SQL> SELECT trigger_type, trigger_body
  2  FROM user_triggers
  3  WHERE trigger_name = 'SECURE_EMP';

TRIGGER_TYPE     TRIGGER_BODY                                                                                                                                                                                                                                                                               
---------------- --------------------------------------------------------------------------------                                                                                                                                                                                                           
BEFORE STATEMENT BEGIN                                                                                                                                                                                                                                                                                      
                  IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR                                                                                                                                                                                                                                            
                     (TO_CHAR(SYSDATE,'HH24                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                            

SQL> set long 1000
SQL> SELECT trigger_type, trigger_body
  2  FROM user_triggers
  3  WHERE trigger_name = 'SECURE_EMP';

TRIGGER_TYPE     TRIGGER_BODY                                                                                                                                                                                                                                                                               
---------------- --------------------------------------------------------------------------------                                                                                                                                                                                                           
BEFORE STATEMENT BEGIN                                                                                                                                                                                                                                                                                      
                  IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR                                                                                                                                                                                                                                            
                     (TO_CHAR(SYSDATE,'HH24') NOT BETWEEN '08' AND '18') THEN                                                                                                                                                                                                                               
                    IF DELETING THEN                                                                                                                                                                                                                                                                        
                      RAISE_APPLICATION_ERROR(-20502,                                                                                                                                                                                                                                                       
                        'You may delete from EMPLOYEES table only during normal business hours.')                                                                                                                                                                                                           
                 ;                                                                                                                                                                                                                                                                                          
                    ELSIF INSERTING THEN                                                                                                                                                                                                                                                                    
                      RAISE_APPLICATION_ERROR(-20500,                                                                                                                                                                                                                                                       
                        'You may insert into EMPLOYEES table only during normal business hours.')                                                                                                                                                                                                           
                 ;                                                                                                                                                                                                                                                                                          
                    ELSIF UPDATING('SALARY') THEN                                                                                                                                                                                                                                                           
                      RAISE_APPLICATION_ERROR(-20503,                                                                                                                                                                                                                                                       
                        'You may update SALARY only during normal business hours.');                                                                                                                                                                                                                        
                    ELSE                                                                                                                                                                                                                                                                                    
                      RAISE_APPLICATION_ERROR(-20504,                                                                                                                                                                                                                                                       
                        'You may update EMPLOYEES table only during normal business hours.');                                                                                                                                                                                                               

TRIGGER_TYPE     TRIGGER_BODY                                                                                                                                                                                                                                                                               
---------------- --------------------------------------------------------------------------------                                                                                                                                                                                                           
                    END IF;                                                                                                                                                                                                                                                                                 
                  END IF;                                                                                                                                                                                                                                                                                   
                 END;                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                            

SQL> exit
